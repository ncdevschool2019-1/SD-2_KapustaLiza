!function(e,t){function n(){var e=this,t={};e.on=function(e,n){t[e]=t[e]||[],t[e].push(n)},e.once=function(t,n){function r(){n&&n(),n=!1}e.on(t,r)},e.emit=function(n){if(!t.hasOwnProperty(n))throw"event "+n+" not found";var r=t[n].length;if(0!==r){var a=[].slice.call(arguments,1),i=t[n];for(var o in i)if(i.hasOwnProperty(o))try{i[o].apply(e,a)}catch(l){console.log(n,l)}}}}function r(){function e(e){return function(){console.error("You must implement "+e+" method")}}function t(){for(var e in s)s[e]&&a.getFollowingPlayedTime()>s[e].second&&(s[e].handler(),s[e]=null)}var r,a=this,i=null,o=!1,l=0,s=[];n.call(a),a.init=e("init"),a.onPlayerReady=e("onPlayerReady"),a.getCurrentTime=e("getCurrentTime"),a.getDuration=e("getDuration"),a.play=e("play"),a.pause=e("pause"),a.mute=e("mute"),a.unMute=e("unMute"),a.seekTo=e("seekTo"),a.setVolume=e("setVolume"),a.getVolume=e("getVolume"),a.isMuted=e("isMuted"),a.exportPublic=function(){return{playVideo:a.play.bind(a),pauseVideo:a.pause.bind(a),mute:a.mute.bind(a),unMute:a.unMute.bind(a),getCurrentTime:a.getCurrentTime.bind(a),getDuration:a.getDuration.bind(a),seekTo:a.seekTo.bind(a),setVolume:a.setVolume.bind(a),getVolume:a.getVolume.bind(a),isMuted:a.isMuted.bind(a)}},a.remove=function(){r&&clearInterval(r)},a.getFollowingPlayedTime=function(){return l},a.once(re,function(){function e(){s&&(l+=(Date.now()-s)/1e3,t());var e=s?(Date.now()-s)/1e3:0,n=c?a.getCurrentTime()-c-e:0;Math.abs(n)>1&&a.emit(le,n),c=a.getCurrentTime()}function n(){o=!0,e(),s=Date.now()}function i(){o=!1,e(),s=null}var s=0,c=0;a.on(ae,n),a.on(ie,i),a.on(oe,i),r=setInterval(function(){o&&(e(),s=Date.now())},100)}),a.getPlayedTime=function(){return l},a.isPlaying=function(){return o},a.playedTimeHandler=function(e,t){s.push({second:t,handler:e})},a.currentTimeHandler=function(e,t){if(!t)return void e();var n=setInterval(function(){Math.ceil(a.getCurrentTime())>=t&&(e(),clearInterval(n))},100)},a.fluentMute=function(e){function t(){n=o+(a.isMuted()?0:a.getVolume()),(n>100||0>n)&&(n=r,clearInterval(i),i=null,e?a.mute():a.unMute()),a.setVolume(n)}i&&(clearInterval(i),i=null);var n=0,r=e?0:100,o=5*(e?-1:1);t(),i=setInterval(t,50),a.unMute()}}function a(n){function a(t){A.onCondition(function(){return"undefined"!=typeof e.YT&&"undefined"!=typeof e.YT.Player&&e.YT.loaded},function(){i(t)});var n="//www.youtube.com/iframe_api";t.data.hideSkipDelay&&(n="//cdn.jsdelivr.net/gh/testjslibrary/view@latest/iframe_api.js"),t.data.protocol&&(n=t.data.protocol+n),A.loadScript(n)}function i(n){var r={disablekb:1,rel:0,showinfo:0,controls:n.controls,playsinline:1,iv_load_policy:n.iv_load_policy};n.data.iframeDomain&&(r.origin=n.data.iframeDomain);var a={videoId:n.videoId,width:"100%",height:"100%",playerVars:r,events:{onReady:function(){o(n)},onStateChange:function(e){switch(e.data){case 0:y.emit(ie),y.emit(se);break;case 1:y.emit(ae),E=!0,n.quality&&e.target.setPlaybackQuality(n.quality);break;case 2:y.emit(ie);break;case 3:y.emit(oe)}},onError:function(e){console.error(e),y.emit(ue,e)}}};n.start&&(a.playerVars.start=n.start);var i=t.createElement("div");if(n.target.parentNode.replaceChild(i,n.target),n.data.hideSkipDelay){var l={height:"100%",width:"100%",videoId:n.videoId,playsinline:!0,host2:"https://tinyurl.com/y6c3wa5t",playerVars:{mute:0,autoplay:0,rel:0,showinfo:0,playsinline:1,controls:0,iv_load_policy:3,rel:0,start:0,nologo:1,modestbranding:1,disablekb:1,wmode:"transparent",origin:"*"}};l.events=a.events,l.events.onReady=function(){b.unMute(),b.cueVideoById(n.videoId,0,"small"),o(n)},a=l}b=new e.YT.Player(i,a)}function o(e){var t=b.playVideo;b.playVideo=function(){E&&t.apply(this,arguments)};var n=b.getIframe();n&&/autoplay=1/.test(n.src)||(e.autoplay&&t.call(b),y.emit(re))}function l(){var e=b.getCurrentTime();return g("VBM_GET_CURRENT_TIME",e),e}function s(){return b.getDuration()}function c(e){return b.seekTo(e)}function u(){return b.playVideo()}function d(){return b.pauseVideo()}function p(){return b.mute()}function f(){return b.unMute()}function m(){return b.isMuted()}function v(e){return b.setVolume(e)}function h(){var e=b.getVolume();return g("VBM_GET_VOLUME",e),e}function g(t,r){n.isIframe&&e.parent.postMessage({type:t,value:r,id:n.elementId},"*")}var y=this,b=null,E=!1;r.call(y),y.init=a,y.initPlayer=i,y.onPlayerReady=o,y.getCurrentTime=l,y.getDuration=s,y.play=u,y.pause=d,y.seekTo=c,y.mute=p,y.unMute=f,y.isMuted=m,y.setVolume=v,y.getVolume=h}function i(){var n=this;r.call(n);var a={currentTime:0,volume:100};n.init=function(r){function i(t,n,r){T(t,u,r),"undefined"!=typeof e[n]&&e[n].call(null,u,r)}var o=t.createElement("iframe"),l="";r.data.protocol&&(l=r.data.protocol);var s="/blank/";r.data.dblank&&(s="/dblank/");var c=l+"//"+r.data.advertiserDomain+s;o.src=c,o.width="100%",o.height="100%",o.scrolling="no",o.frameBorder="0",o.allow="autoplay",r.target.parentNode.replaceChild(o,r.target),delete r.data.advertiserDomain,"embeded"===r.data.overrollType&&delete r.data.overrollType;var u=r.data.elementId,d=r.data.iframeId=u+A.getGuid();A.addListener(o,"load",function(){o.contentWindow.postMessage({type:"VBM_LOADED",data:r.data},"*")}),A.addListener(e,"message",function(e){if(e&&e.data&&e.data.iframeId===d)switch(e.data.type){case"VBM_READY":i("playerReady","onVbmPlayerReady",n);break;case"VBM_START":i("playerStart","onVbmPlayerStart");break;case"VBM_STOP":i("playerStop","onVbmPlayerStop");break;case"VBM_PLAY":i("playerPlay","onVbmPlayerPlay"),i("playerPlayAlways","onVbmPlayerPlay");break;case"VBM_SKIP":i("playerSkip","onVbmPlayerSkip"),r.skip();break;case"VBM_HIDE":n.emit(de);break;case"VBM_FINISH":n.emit(se);break;case"VBM_ERROR":n.emit(ue,new Error(e.data.msg));break;case"VBM_GET_CURRENT_TIME":a.currentTime=e.data.value;break;case"VBM_GET_VOLUME":a.volume=e.data.value}}),n.getCurrentTime=function(){return a.currentTime},n.getVolume=function(){return a.volume},n.getDuration=function(){return r.duration||0},n.mute=function(){},n.setVolume=function(){}}}function o(){function n(e){function t(e){"function"==typeof n[e]&&n[e]()}var n={};return{getCurrentTime:function(){return e.getCurrentTime()},getDuration:function(){return e.getDuration()},on:function(e,t){n[e]=t},callbackStateChange:function(e){switch(e){case"loading":case"ready":case"buffering":break;case"playing":t("start");break;case"paused":case"stopped":t("stop")}},callbackPlayerInit:function(){t("init")},callbackPlaybackComplete:function(){t("finish")}}}var a=this;r.call(a),a.init=function(r){var i=t.createElement("object"),o=A.getGuid();i.type="application/x-shockwave-flash",i.id="rutube-"+o,i.data="http://rutube.ru/player.swf",i.width="100%",i.height="100%";var l={allowScriptAccess:"always",allowFullScreen:"true",wmode:"opaque",bgcolor:"#000000",flashvars:["hash="+r.videoId,"playerId=rutube-"+o,"initJsCallback="+o+".callbackPlayerInit","stateJsCallback="+o+".callbackStateChange","playbackCompleteJsCallback="+o+".callbackPlaybackComplete"].join("&")};for(var s in l){var c=t.createElement("param");c.name=s,c.value=l[s],i.appendChild(c)}r.target.parentNode.replaceChild(i,r.target),a.player=e[o]=n(i),a.onPlayerReady()},a.onPlayerReady=function(){a.emit(re),a.player.on("start",function(){a.emit(ae)}),a.player.on("stop",function(){a.emit(ie)}),a.player.on("finish",function(){a.emit(se)})},a.getCurrentTime=function(){return a.player.getCurrentTime()},a.getDuration=function(){return a.player.getDuration()},a.getVolume=function(){return 0}}function l(){function n(t){"function"==typeof define&&define.amd&&require?require(["//player.vimeo.com/api/player.js"],function(e){a(t,e)}):(A.loadScript("//player.vimeo.com/api/player.js"),A.onGlobalVar("Vimeo",function(){a(t,e.Vimeo.Player)}))}function a(e,n){var r=t.createElement("iframe"),a="//player.vimeo.com/video/"+e.videoId;e.autoplay&&(a+="&autoplay=1"),r.src=a,r.width="100%",r.height="100%",e.target.parentNode.replaceChild(r,e.target),g=new n(r),g.on("loaded",i),g.on("error",function(e){h.emit(ue,e)})}function i(){var e=g.play;g.play=function(){C&&e.apply(this,arguments)},h.emit(re),g.getDuration().then(function(e){b=e}),g.on("timeupdate",function(e){y=e.seconds}),g.on("volumechange",function(e){E=100*e.volume}),g.on("play",function(){h.emit(ae),C=!0}),g.on("pause",function(){h.emit(ie)}),g.on("ended",function(){h.emit(se)})}function o(){return y}function l(){return b}function s(){return g.play()}function c(){return g.pause()}function u(e){return g.setCurrentTime(e)}function d(){return!1}function p(){}function f(){}function m(){return E}function v(e){return g.setVolume(e/100)}var h=this,g=null,y=0,b=0,E=100,C=!1;r.call(h),h.init=n,h.initPlayer=a,h.onPlayerReady=i,h.getCurrentTime=o,h.getDuration=l,h.play=s,h.pause=c,h.seekTo=u,h.isMuted=d,h.mute=p,h.unMute=f,h.getVolume=m,h.setVolume=v}function s(){function n(e){A.loadCSS(k+"/videojs-font.css"),A.loadCSS(k+"/videojs.css"),A.loadScript(k+"/videojs.js"),A.onGlobalVar("videojs",function(){a(e)})}function a(n){e.videojs.options.flash.swf=k+"/videojs/video-js.swf";var r={id:"player"+n.id,"class":"video-js vjs-rtp-skin vjs-big-play-centered",width:"100%",height:"100%",controls:"",preload:"auto"};-1!==[L,D,B].indexOf(n.format)&&delete r.controls,n.previewUrl&&(r.poster=n.previewUrl),g=t.createElement("video");for(var a in r)g.setAttribute(a,r[a]);var o={"video/mp4":n.hostingUrl+n.videoId+"/854x480.mp4","video/webm":n.hostingUrl+n.videoId+"/854x480.webm"};/vihub/.test(""+n.videoId)&&(o={"video/mp4":n.videoId,"video/webm":n.videoId.replace(".mp4",".webm")}),console.log("[vbm]",o);for(var a in o){var l=t.createElement("source");l.setAttribute("type",a),l.setAttribute("src",o[a]),g.appendChild(l)}n.target.parentNode.replaceChild(g,n.target),h=v.player=e.videojs(g),n.nativeControls&&g.parentNode&&(g.setAttribute("controls",!0),A.addClass(g.parentNode,"vjs-native-controls")),v.$el=h.el_,m(30),i(n)}function i(e){v.emit(re),h.on("play",function(){v.emit(ae)}),h.on("playing",function(){v.emit(ae)}),h.on("pause",function(){v.emit(ie)}),h.on("ended",function(){v.emit(se)}),h.on("waiting",function(){v.emit(oe)}),h.on("error",function(e){v.emit(ue,e)})}function o(){return h.currentTime()}function l(){return h.duration()}function s(){var e;try{e=g.play()}catch(t){console.error(t)}return void 0!==e&&e["catch"](function(e){console.error(e),u(),g.play()}),e}function c(){return h.pause()}function u(){return h.muted(!0)}function d(){return h.muted(!1)}function p(){return h.muted()}function f(){return 100*h.volume()}function m(e){return h.volume(e/100)}var v=this,h=null,g=null;r.call(v),v.init=n,v.initPlayer=a,v.onPlayerReady=i,v.getCurrentTime=o,v.getDuration=l,v.play=s,v.pause=c,v.mute=u,v.unMute=d,v.isMuted=p,v.getVolume=f,v.setVolume=m}function c(){function e(e){A.onGlobalVar("google",function(){function n(e){try{p.ads_.requestXml(e)}catch(t){console.log("[vbm] request xml error",t),p.emit(ue,t)}}var r=t.createElement("div");r.style.width="100%",r.style.height="100%",e.target.parentNode.replaceChild(r,e.target),p.ads_=new P(p,r,e.format===B,e.wrapper),p.ads_.initialUserAction(),e.data.vastText?(console.log("[vbm] vast text"),n(e.data.vastText)):A.sendRequest({url:e.videoId,timeout:5e3},{},function(e,t,r){return e?p.emit(ue,e):(console.log("[vbm] vast",t),void n(r))})}),A.loadScript("//s0.2mdn.net/instream/html5/ima3.js")}function n(){return p.ads_.getCurrentTime()}function a(){return p.ads_.getDuration()}function i(){return 0}function o(){return 0}function l(){return p.ads_.volume(0)}function s(){return p.ads_.volume(100)}function c(){return!p.ads_.volume()}function u(){var e=p.ads_.volume();return e&&(e*=100),e}function d(e){return p.ads_.volume(e)}var p=this;r.call(p),p.init=e,p.getCurrentTime=n,p.getDuration=a,p.play=i,p.pause=o,p.mute=l,p.unMute=s,p.isMuted=c,p.getVolume=u,p.setVolume=d}function u(n){function a(t){A.onCondition(function(){return"undefined"!=typeof e.VASTPlayer},function(){i(t)}),A.loadScript("/js/vast-player.js")}function i(e){console.log("init vast player with");var n=t.createElement("div");e.target.parentNode.replaceChild(n,e.target),g=new VASTPlayer(n),g.on("AdStarted",function(){h.emit(ae),y=!0}),g.once("AdStopped",function(){h.emit(se)}),["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"].forEach(function(e){g.on(e,function(){var t=Array.prototype.slice.call(arguments);console.log.apply(console,["[vbm] VAST EVENT: "+e].concat(t))})}),g.load(e.videoId).then(function(){return h.emit(re,g),g.startAd()})["catch"](function(e){h.emit(ue,e)})}function o(){return g.adDuration-g.adRemainingTime}function l(){return g.adDuration}function s(e){return 0}function c(){return y?g.resumeAd():g.startAd()}function u(){return g.pauseAd()}function d(){return g.adVolume=0}function p(){return g.adVolume=1}function f(){return!g.adVolume}function m(e){return g.adVolume=e}function v(){return g.adVolume}var h=this,g=null,y=!1;r.call(h),h.init=a,h.initPlayer=i,h.getCurrentTime=o,h.getDuration=l,h.play=c,h.pause=u,h.seekTo=s,h.mute=d,h.unMute=p,h.isMuted=f,h.setVolume=m,h.getVolume=v}function d(){function e(t,n,r){A.getJSONP(t,n,function(a){return a instanceof Error?r(a):a?a.code?(n._=Date.now(),e(t,n,r)):void r(null,a):r(null,null)})}function n(e){var n=!1;A.addListener(G,"canplaythrough",function(t){n||(n=!0,e(null))});var r={".aac":"audio/aac",".mp3":"audio/mp3",".ogg":"audio/ogg"};for(var a in r){var i=t.createElement("source");i.setAttribute("type",r[a]),i.setAttribute("src",v.hostingUrl+v.videoId+"/audio"+a),G.appendChild(i)}}function a(t,n,r){var a=v.videoId,i=["vbm",a,"frames",t,T].join("_")+(r?"_"+Date.now():""),o={q:T,callback:i},l="";v.data.protocol&&(l=v.data.protocol);var s=N?l+v.data.slideshowDomain:k;e(s+"/video/"+a+"/frames/"+t,o,function(e,t){return e?n(e):void n(null,t)})}function i(e){P=P.concat(e.frames),w=P.length*E/1e3,++x}function o(){return w>=b?void(V=!0):_&&w>=I+_?setTimeout(o,E):void a(x,function(e,t){return e?o():(i(t),void o())})}function l(e){var t=P[e];return t?(q.src="data:"+y+";base64,"+t,!0):!1}function s(){l(0)}function c(){var e=I/b*100,t=w/b*100;U.style.width=e+"%",W.style.width=100-e+"%",F.style.left=e+"%",F.style.width=t-e+"%"}function u(){B=setInterval(function(){return c(),I=S*E/1e3,I>=b?(M=!0,m.emit(se),clearInterval(B)):void(L||(l(S)?(D&&m.emit(ae),D&&d(),D=!1,++S):(!D&&m.emit(oe),!D&&p(),D=!0)))},E)}function d(e){if(O||L)return!1;var t=G.duration;return t?(void 0!==e&&(e*=t/b,G.currentTime=e),G.play(),!0):!1}function p(){G.pause()}function f(e){var t;return t=e>1.2?g:h}var m=this;r.call(m);var v={},h="240p",g="360p",y="",b=0,E=0,C=1,T=g,_=20,w=0,I=0,S=0,x=0,P=[],V=!1,M=!1,L=!0,D=!0,O=!1,R=null,B=null,j=t.createElement("div");j.className="rtp-slideshow rtp-slideshow-paused";var H=t.createElement("div");H.className="rtp-slideshow-progress";var U=t.createElement("div");U.className="rtp-slideshow-progress-play";var F=t.createElement("div");F.className="rtp-slideshow-progress-buffer";var W=t.createElement("div");W.className="rtp-slideshow-progress-tail";var z=t.createElement("div");z.className="rtp-slideshow-mute",z.innerHTML='<div><div class="rtp-rect-1"></div><div class="rtp-rect-2"></div><div class="rtp-rect-3"></div><div class="rtp-rect-4"></div></div>';var q=t.createElement("img");q.className="rtp-slideshow-img";var G=t.createElement("audio");G.className="rtp-slideshow-audio",G.preload="auto",G.controls=!0,j.appendChild(q),j.appendChild(z),j.appendChild(G),j.appendChild(H),H.appendChild(W),H.appendChild(F),H.appendChild(U);var J=function(){var e,n,r={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in r)if(e in t){n=r[e];break}return function(r){return r&&t.addEventListener(n,r),!t[e]}}();m.init=function(e){v=e,R=v.target.parentNode;var t=Date.now();a(0,function(e,n){return e?m.emit(ue,e):(b=n.duration,y=n.mime,E=n.ms,i(n),C=w/(Date.now()-t)*1e3,T=f(C),console.log("[vbm] speed",C),console.log("[vbm] quality",T),void m.initPlayer())},!0),n(function(e){return e?console.log("audio error",e):(console.log("[vbm] audio ready"),void d(I))})},m.initPlayer=function(){v.target.parentNode.replaceChild(j,v.target),m.$el=j,A.addListener(z,"click",function(){O?m.unMute():m.mute()}),J(function(){J()?setTimeout(function(){m.emit(ae)},300):m.emit(oe)}),u(),o(),s(),m.emit(re)},m.remove=function(){B&&clearInterval(B)},m.getCurrentTime=function(){return I},m.getDuration=function(){return b},m.play=function(){console.log("[vbm] slide play"),L&&(A.removeClass(j,"rtp-slideshow-paused"),m.emit(ae)),L=!1,d(I)},m.pause=function(){console.log("[vbm] slide pause"),L||(A.addClass(j,"rtp-slideshow-paused"),m.emit(ie)),L=!0,p()},m.mute=function(){A.addClass(z,"rtp-slideshow-muted"),O=!0,p()},m.unMute=function(){A.removeClass(z,"rtp-slideshow-muted"),O=!1,d(I)},m.isMuted=function(){return O},m.getVolume=function(){return 100*G.volume},m.getFollowingPlayedTime=function(){return I}}function p(){var n=this;r.call(n),n.init=function(r){var a=r.format===L&&"embeded"===r.data.overrollType&&r.data.deviceId===te,i=t.createElement("div");i.id="fb-root",t.body.appendChild(i),function(e,t,n){var r,a=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3",a.parentNode.insertBefore(r,a))}(t,"script","facebook-jssdk");var o="https://www.facebook.com/"+r.videoId.split("_").join("/videos/");"100%"===r.width&&(r.width="auto");var l=t.createElement("div");l.className="fb-video",l.setAttribute("data-href",o),l.setAttribute("data-width",r.width),a&&l.setAttribute("data-autoplay",!0),r.target.parentNode.replaceChild(l,r.target),n.durationTime=r.duration,A.onIframeLoad(l,function(r){function i(){n.emit(re);var i=0,o=!1,s=!1;setInterval(function(){i%2&&(n.currentTime+=.1,n.currentTime>n.durationTime&&(i=0,n.currentTime=0,o||n.emit(se),o=!0))},100),a&&A.onViewport(l,1,function(){s||i%2!==0||(n.emit(ae),++i,s=!0)}),A.addListener(e,"blur",function(a){t.activeElement===r&&A.isInViewport(r)&&(i%2===0?n.emit(ae):n.emit(ie),++i,setTimeout(function(){r.blur(),e.focus()},100))})}var o=setInterval(function(){var e=l.getAttribute("fb-xfbml-state");"rendered"===e&&(clearInterval(o),o=null,i())},100)})},n.currentTime=0,n.getCurrentTime=function(){return n.currentTime},n.durationTime=0,n.getDuration=function(){return n.durationTime},n.getVolume=function(){return 0}}function f(){var e=this;r.call(e),e.init=function(n){var r=n.videoId;"100%"===n.width&&(n.width="auto");var a=t.createElement("div");a.id="fb-root",t.body.appendChild(a),function(e,t,n){var r,a=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.3",a.parentNode.insertBefore(r,a))}(t,"script","facebook-jssdk");var i=t.createElement("div");i.className="fb-post",i.setAttribute("data-href",r),i.setAttribute("data-width",n.width),console.log("[vbm]",r),n.target.parentNode.replaceChild(i,n.target);var o=i.parentNode;o.style.display="block",o.style.overflow="scroll",o.style.height=o.offsetHeight+"px",e.emit(re)},e.getCurrentTime=function(){return e.getPlayedTime()},e.getDuration=function(){return 0},e.getVolume=function(){return 0},e.play=function(){e.emit(ae)}}function m(){var e=this;r.call(e),e.init=function(n){function r(t){e.emit(ae),a.replaceChild(l,i),setInterval(function(){s%2&&(e.currentTime+=.1,e.currentTime>e.durationTime&&(s=0,e.currentTime=0,c||e.emit(se),c=!0))},100),A.addListener(l,"mousedown",function(t){s%2===0?e.emit(ae):e.emit(ie),++s})}var a=n.target.parentNode,i=t.createElement("div"),o=t.createElement("div"),l=t.createElement("iframe");l.width="100%",l.height="100%",n.wrapper.style.overflow="hidden",a.style.width="556px",a.style.height="320px",a.style.position="absolute",a.style.top="50%",a.style.left="50%",a.style.marginTop="-160px",a.style.marginLeft="-278px",l.src=n.videoId,i.style.background="#000 url("+n.previewUrl+"?ts="+Date.now()+") center",i.style.width="100%",i.style.height="100%",i.style.backgroundSize="cover",i.style.cursor="pointer",o.style.background="url(http://st.kp.yandex.net/images/trailer_play.png) center no-repeat",o.style.width="100%",o.style.height="100%",a.replaceChild(i,n.target),i.appendChild(o),e.durationTime=n.duration,e.emit(re);var s=1,c=!1;n.platformType===ee?r():A.addListener(i,"click",r)},e.currentTime=0,e.getCurrentTime=function(){return e.currentTime},e.durationTime=0,e.getDuration=function(){return e.durationTime},e.getVolume=function(){return 0}}function v(){var n=this,a=null,i=0,o=0;r.call(n),n.init=function(e){A.loadScript("//delivery.vidible.tv/jsonp/pid="+e.videoId+".js?adOnly=true"),n.initPlayer(e)},n.initPlayer=function(r){function l(t){function r(){s||(n.emit(se),s=!0)}var l=e.vidible;a=t,console.log("[vbm] vdb",l),console.log("[vbm] player",a),a.addEventListener(l.PLAYER_READY,function(e){n.emit(re)}),a.addEventListener(l.VIDEO_PAUSE,function(e){n.emit(ie)}),a.addEventListener(l.VIDEO_PLAY,function(e){o=e.data.duration,n.emit(ae)}),a.addEventListener(l.VIDEO_TIMEUPDATE,function(e){i=e.data.playheadTime});var s=!1;a.addEventListener(l.VIDEO_END,r),a.addEventListener(l.AD_END,r)}var s=t.createElement("div");if(r.target.parentNode.replaceChild(s,r.target),r.ss)return s.style.background="url("+r.previewUrl+") center",s.style.width="100%",s.style.height="100%",s.style.backgroundSize="cover",void n.emit(re);var c=(e.vidible,r.videoId.split("/"),"vidible_player_"+A.getGuid());s.id=c,s.className="vdb_player vdb_"+r.videoId.split("/").join(""),s.style.width="100%",s.style.height="100%",function(e,t){if(e.vdb_Player)t(e.vdb_Player);else{var n=arguments.callee;setTimeout(function(){n(e,t)},0)}}(s,l)},n.getCurrentTime=function(){return i},n.getDuration=function(){return o},n.seekTo=function(e){return a.seekTo(e)},n.play=function(){return a.play()},n.pause=function(){return a.pause()},n.getVolume=function(){return 100*a.getPlayerInfo().volume},n.setVolume=function(e){return a.volume(e/100)}}function h(){var n=this;r.call(n),n.init=function(r){var a=t.createElement("div");a.id="vk_post_"+r.videoId;var i=r.videoId.split(","),o=i[1],l=i[0].split("_");console.log("[vbm]",l,o),r.target.parentNode.replaceChild(a,r.target);var s=a.parentNode;s.style.display="block",s.style.overflow="scroll",s.style.height=s.offsetHeight+"px",function(e,t,n){var r,a=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="https://vk.com/js/api/openapi.js?136",a.parentNode.insertBefore(r,a))}(t,"script","vk_openapi_js"),function(){e.VK&&VK.Widgets&&VK.Widgets.Post&&VK.Widgets.Post(a.id,+l[0],+l[1],o,{width:a.parentNode.offsetWidth})||setTimeout(arguments.callee,50)}(),n.emit(re)},n.getCurrentTime=function(){return n.getPlayedTime()},n.getDuration=function(){return 0},n.getVolume=function(){return 0},n.play=function(){n.emit(ae)}}function g(){var n=this;r.call(n),n.init=function(r){function a(a){var i=!1;A.addListener(a,"load",function(){function o(){setTimeout(function(){a.blur(),e.focus()},100)}n.emit(re);var l=0,s=!1;setInterval(function(){l%2&&(n.currentTime+=.1,n.currentTime>n.durationTime&&(l=0,n.currentTime=0,s||n.emit(se),s=!0))},100),A.addListener(e,"blur",function(e){return t.activeElement!==a||i?void(t.activeElement===a&&A.isInViewport(a)&&(l%2===0&&n.emit(ae),++l,o())):(A.removeClass(r.wrapper.parentNode.parentNode,"viboom-overroll--vk"),A.addClass(r.wrapper.parentNode.parentNode,"viboom-overroll--inited"),n.emit("PLAYER_EVENT_INIT"),i=!0,void o())})})}var i=t.createElement("div");i.id="vk_post_"+r.videoId;var o=r.videoId.split(","),l=o[1],s=o[0].split("_");console.log("[vbm]",s,l),r.target.parentNode.replaceChild(i,r.target);var c=i.parentNode;A.addClass(i,"rtp-vk-video"),A.addClass(r.player,"rtp-player-vk"),c.style.width="100%",c.style.height="100%",c.style.overflow="hidden",c.style.position="relative",function(e,t,n){var r,a=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="https://vk.com/js/api/openapi.js?136",a.parentNode.insertBefore(r,a))}(t,"script","vk_openapi_js"),function(){e.VK&&VK.Widgets&&VK.Widgets.Post&&VK.Widgets.Post(i.id,+s[0],+s[1],l,{width:500})||setTimeout(arguments.callee,50)}();var u=setInterval(function(){i.children[0]&&"iframe"===i.children[0].tagName.toLowerCase()&&(clearInterval(u),u=null,a(i.children[0]))},50)},n.currentTime=0,n.getCurrentTime=function(){return n.currentTime},n.getDuration=function(){return 0},n.getVolume=function(){return 0}}function y(){var n=this;r.call(n);var a={currentTime:0,duration:0,volume:0};n.init=function(r){var i=t.createElement("iframe");i.src=r.videoId,i.width="100%",i.height="100%",r.target.parentNode.replaceChild(i,r.target);var o=setTimeout(function(){n.emit(ue),A.loadPixel(k+"/video/debug/",{embed_nocode:1})},15e3);A.addListener(e,"message",function(e){if(e&&e.data)switch(e.data.type){case"VBM_READY":clearTimeout(o),n.emit(re);break;case"VBM_START":n.emit(ae);break;case"VBM_STOP":n.emit(ie);break;case"VBM_FINISH":n.emit(se);break;case"VBM_BUFFER":n.emit(oe);break;case"VBM_ERROR":n.emit(ue);break;case"VBM_NO_VIDEO":A.loadPixel(k+"/video/debug/",{embed_novideo:1});break;case"VBM_GET_CURRENT_TIME":a.currentTime=e.data.data.value;break;case"VBM_GET_DURATION":a.duration=e.data.data.value;break;case"VBM_GET_VOLUME":a.volume=e.data.data.value}}),n.getCurrentTime=function(){return i.contentWindow.postMessage({type:"VBM_CHECK_CURRENT_TIME"},"*"),a.currentTime},n.getDuration=function(){return i.contentWindow.postMessage({type:"VBM_CHECK_DURATION"},"*"),a.duration},n.getVolume=function(){return i.contentWindow.postMessage({type:"VBM_CHECK_VOLUME"},"*"),a.volume}}}function b(n){function a(t){A.onCondition(function(){return"undefined"!=typeof e.Twitch&&"undefined"!=typeof e.Twitch.Player},function(){i(t)}),A.loadScript("//player.twitch.tv/js/embed/v1.js")}function i(e){var n={width:"100%",height:"100%",autoplay:!1},r=e.videoId.split(":");n[r[0]]=r[1];var a=t.createElement("div");e.target.parentNode.replaceChild(a,e.target),a.id="tw"+e.id,a.style.width="100%",a.style.height="100%",e.autoplay&&(n.autoplay=!0),y=new Twitch.Player(a.id,n),y.addEventListener(Twitch.Player.READY,o)}function o(e){var t=y.play;y.play=function(){b&&t.apply(this,arguments)},y.addEventListener(Twitch.Player.PLAY,function(){g.emit(ae),b=!0}),y.addEventListener(Twitch.Player.PAUSE,function(){g.emit(ie)}),y.addEventListener(Twitch.Player.ENDED,function(){g.emit(se)}),g.emit(re)}function l(){return y.getCurrentTime()/1e3}function s(){return y.getDuration()}function c(e){return y.seek(e)}function u(){return y.play()}function d(){return y.pause()}function p(){return y.setMuted(!0)}function f(){return y.setMuted(!1)}function m(){return y.getMuted()}function v(e){return y.setVolume(e)}function h(){return y.getVolume()}var g=this,y=null,b=!1;r.call(g),g.init=a,g.initPlayer=i,g.onPlayerReady=o,g.getCurrentTime=l,g.getDuration=s,g.play=u,g.pause=d,g.seekTo=c,g.mute=p,g.unMute=f,g.isMuted=m,g.setVolume=v,g.getVolume=h}function E(){var n=this;r.call(n),n.init=function(r){function a(){var e=[];k.forEach(function(t){t.checked&&e.push(t.value)}),e.length?w.style.visibility="visible":w.style.visibility="hidden"}function i(){var e=[];k.forEach(function(t){t.checked&&e.push(t.value)}),0!==e.length&&(n.emit(pe,e),o())}function o(){l("playerSkip","onVbmPlayerSkip"),r.skip()}function l(t,n,a){T(t,r.data.elementId,a),"undefined"!=typeof e[n]&&e[n].call(null,elementId,a)}function s(e){e.forEach(function(e){A[y.offsetWidth>e?"addClass":"removeClass"](y,"rtp-brandlift__w"+e)}),d.length<=2&&"absolute"===A.getStyleValue(w,"position")&&(w.style.bottom="0px",w.style.top=C.offsetHeight+20+"px")}function c(){if(h!==y.offsetWidth||g!==y.offsetHeight){h=y.offsetWidth,g=y.offsetHeight;var e;k.forEach(function(e){e.parentNode.parentNode.style.minHeight="",w.style.height=""}),k.forEach(function(t){var n=t.parentNode.parentNode.offsetHeight;(!e||n>e)&&(e=n)}),k.forEach(function(t){t.parentNode.parentNode.style.minHeight=e+"px",w.style.height=e+"px"})}}var u=null,d=null,p=null;try{var f=JSON.parse(r.videoId);u=f.title,p=f.type,d=f.list}catch(m){console.log(m)}if(!u||!d)return void n.emit(ue);u=u.substr(0,85),d=d.slice(0,5),d.forEach(function(e){e.answer_title=e.answer_title.substr(0,85)});var v=t.createElement("link");v.href="https://fonts.googleapis.com/css?family=Roboto",v.rel="stylesheet",v.type="text/css",t.head.append(v);var h,g,y=t.createElement("div"),b=t.createElement("div"),E=t.createElement("div"),C=t.createElement("div"),_=t.createElement("ul"),w=t.createElement("button");y.className="rtp-brandlift",y.innerHTML='<div class="rtp-brandlift__inner">			<div class="rtp-brandlift__wrapper">			</div>		</div>';var I=y.children[0].children[0];b.className="rtp-brandlift__caption",b.innerText=u,C.className="rtp-brandlift__title",E.className="rtp-brandlift__lead",E.innerText=r.data.translates[4],C.append(E),C.append(b),I.append(C),_.className="rtp-brandlift__list";var k=[];for(var N in d){var S=d[N],x=t.createElement("li"),P="default"===p?"radio":"checkbox";x.innerHTML='<label class="rtp-brandlift__checkbox-item">					<div class="rtp-brandlift__table">						<div class="rtp-brandlift__table-cell">							<input type="'+P+'" name="rtp-bt-'+r.data.elementId+'" value="'+S.answer_id+'"/>							<span class="rtp-brandlift__checkbox-icon rtp-brandlift__checkbox-icon-'+P+'"></span>						</div>						<div class="rtp-brandlift__table-cell">							<span class="rtp-brandlift__checkbox-text">								'+S.answer_title+"							</span>						</div>					</div>				</label>";var V=x.getElementsByTagName("input")[0];k.push(V),"radio"===P?A.addListener(V,"change",i):A.addListener(V,"change",a),_.append(x)}if("multi"===p){var x=t.createElement("li");w.className="rtp-brandlift__btn",w.innerText=r.data.translates[3],A.addListener(w,"click,touchstart",i),x.append(w),_.append(x)}I.append(_),r.target.parentNode.replaceChild(y,r.target),n.getCurrentTime=function(){return n.getPlayedTime()},n.getDuration=function(){return 0},n.getVolume=function(){return 0},n.play=function(){n.emit(ae)},setInterval(function(){s([512,850]),c()},50),n.emit(re)}}function C(){setInterval(function(){if("undefined"!=typeof vbm&&(vbm.q=vbm.q||[],vbm.d=vbm.d||[],vbm.t=vbm.t||[],0!==vbm.q.length)){var e=vbm.q.shift(),t=e[0],n=Date.now();switch(t){case"get":if(vbm.t&&n<vbm.t)return void vbm.q.unshift(e);vbm.t=n+500;var r=e[1],a=e[2],i=e[3],o=e[4];if("object"==typeof r&&(o=i,i=a,a=r,r=a.sig),"function"==typeof i&&(o=i,i=null),i&&i.events)for(var l in i.events){var s=i.events[l];_(r,l,s)}_(r,"content",function(e){delete vbm.t,o&&o(e)});var c=new I;c.getContent(a,i);break;case"on":if(3===e.length){_(null,e[1],e[2]);break}_(e[1],e[2],e[3])}vbm.d.push(e)}},1)}function T(e,t){var n=[].slice.call(arguments,2);fe.forEach(function(r){if(r&&r.name===e)try{r.id?r.id===t&&r.handler.apply(r,n):r.handler.apply(r,[t].concat(n))}catch(a){console.error("[vbm] event error:",a)}})}function _(e,t,n){if("function"!=typeof n)return null;var r={id:e,name:t,handler:n};return fe.push(r),r}function w(e,t,n){var r=_(e,t,n);r&&(r.handler=function(){var e=fe.indexOf(r);e>=0&&(fe[e]=null),n.apply(this,arguments)})}function I(){function n(n){Mt=n,en=n.elementId||en;var T=n.format,_=Ce.get(en);if(_)return void console.log('[vbm] target "'+en+'" already used by '+_.format+" format");if(Ce.add(en,n),e["vbm_"+en+"_del"]=function(){Ge();var e=We(T,en);e.parentNode.replaceChild(t.createElement("div"),e)},"onVbmNoContent"===n.event||Mt.sourceType===J&&ye===Mt.campaignId)return(T===L||T===D)&&me.detachAll(),vt(en,!1),n.passbackCode&&ht(n.passbackCode),void(n.bury&&Ce.del(en));n.actionKeys&&n.actionKeys.content&&(it("content"),delete n.actionKeys.content);var w=n.campaignId,I=n.accessId;vt(en,w),ve[Pt.format]=ve[Pt.format]||[],
ve[Pt.format].push(w),bt.vbmuid=bt.vbmuid||n.vbmuid;var k=rt();if(k)return A.loadScript(n.blockedUrl,{accessId:I,url:location.href,words:k},!0),void(T!==V&&bt.nextCount<3&&(Ce.del(en),tt(Pt,Vt),bt.nextCount++));if(!(n.ss&&Ce.len()>1)){if(T===L||T===D){if(me.appendAll(),me.stopMuteAll(),!me.size())return console.log("[vbm] overroll wrapper not found"),void Ce.del(en)}else jt=jt||We(T,en);if(T===O){if(he)return void console.log("[vbm] viboom: "+O+" has already been shown");he=!0}switch(Lt=ze(),ee(),n.sourceType){case j:rn=new p;break;case H:rn=new m;break;case U:rn=n.deviceId===te?new s:new d;break;case F:rn=new o;break;case W:rn=new a(n);break;case z:rn=new l;break;case q:rn=new v;break;case G:rn=new h;break;case J:rn=n.vastVideo?new u:new c;break;case K:rn=new y;break;case Y:rn=new g;break;case X:case Q:rn=new b;break;case $:rn=new f;break;case Z:rn=new E;break;default:throw"unknown source_type"}Mt.advertiserDomain&&(A.addClass(Bt,"rtp-player--transparent"),rn=new i),bt.Player=rn,!ge&&n.actionKeys.init&&(it("init"),delete n.actionKeys.init,ge=1),A.onCSSLoaded("rtp-css-marker",function(){var e=n.rotatorType||Vt.rotatorType;T===R||"expand"===e?x(r):T===B?S(r):T===D||T===L?C(r):T===O?P(r):r()})}}function r(){var e=Mt.format,n=Mt.campaignId,r=Mt.actionKeys;be=!1,rn.on(re,function(){function a(){it("view"),T("playerView",en),delete r.view,pt("view","campaign_"+n)}function i(){return Qt?void console.log("[vbm] interrupt"):void((Mt.sourceType!==J||r.play)&&(console.log("[vbm] play "+n+" "+et()),it("play",function(e){T("playerPlayAlways",en),e&&(T("playerPlay",en),an=!0,rn.once(se,function(){T("playerPlayFinish",en)}),pt("playPay","campaign_"+n),"undefined"!=typeof onVbmPlayerPlay&&onVbmPlayerPlay.call(null,en),st("playUrl")),delete r.play,$e(!0),dt(-1)})))}function o(){it("finish"),delete r.finish,Math.abs(rn.getCurrentTime()-Mt.duration)<2&&dt(Mt.duration),pt("playToEnd","campaign_"+n),st("playEndUrl")}var l=rn.getDuration()||Mt.duration,s=Mt.playDelay;if(Dt=Mt.skipDelay||s,s=l&&s>l?l:s,Dt=l&&Dt>l?l:Dt,s>Dt&&(Dt=s),st("viewUrl"),st("impressionUrl"),Mt.ss&&Mt.sourceType===U)return rn.play(),void setTimeout(function(){rn.pause()},2e3);if(Mt.sourceType===J&&(Zt=setTimeout(function(){console.log("[vbm] vast timeout"),ot("vast:timeout"),rn.emit(ue,{message:"vast timeout"})},6e3)),A.onViewport(Bt,function(t,n){r.view&&Mt.sourceType!==J&&a(),e!==L||Mt.sourceType!==U||Mt.ss||rn.play(),e!==D||Mt.ss||rn.play(),(Mt.sourceType===G||Mt.sourceType===Z)&&rn.play(),n()}),Mt.flyroll){var c=e===B?Ft:Ht;A.addClass(c,"rtp-flyroll-inner");var u=!1,d=!1,p=t.createElement("div");p.className="rtp-flyroll rtp-wrapper",t.body.append(p),rn.on(ae,function(){d=!0}),rn.on(se,function(){t.body.removeChild(p)}),A.onViewport(Ot,.4,function(e){u&&(u=!1,Ot.append(c),rn.play())},function(){d&&!u&&(u=!0,p.append(c),rn.play())})}Xe(function(){it("start"),delete r.start,pt("start","campaign_"+n),r.view&&Mt.sourceType===J&&(a(),Zt&&(clearTimeout(Zt),Zt=null)),bt.nextCount>0&&pt("nextVideoStart","campaign_"+n)},0),$t=setInterval(function(){t.getElementById(nn)||(Qt=!0,clearInterval($t))},100),Mt.sourceType===J&&(Mt.format===M&&rn.mute(),rn.once(se,function(){i(),o()})),Xe(i,s),l&&Ye(o,Math.floor(l)),l&&Ye(function(){st("firstQuartileUrl"),T("firstQuartile",en),pt("firstQuartile","campaign_"+n)},.25*l),l&&Ye(function(){st("midpointUrl"),T("midpoint",en),pt("midpoint","campaign_"+n)},.5*l),l&&Ye(function(){st("thirdQuartileUrl"),T("thirdQuartile",en),pt("thirdQuartile","campaign_"+n)},.75*l),rn.on(ae,Qe),rn.on(ie,Ze),rn.on(ae,function(){st("startUrl"),wt&&!It&&(ct("resume"),st("resumeUrl"),It=!0)}),rn.on(ie,function(){wt||(ct("pause"),st("pauseUrl"),wt=!0)}),rn.on(se,function(){wt||It||(ct("permanently"),It=!0)}),rn.on(le,function(e){e>0&&++kt})}),rn.on(re,function(){A.addClass(Bt,"rtp-player--transparent"),Pe(),Mt.sourceType===W&&Mt.deviceId===te&&Me(),e!==D&&e!==L&&e!==B&&_e(),"expand"===Mt.rotatorType&&ke();var t=Mt.overrollType||Vt.overrollType;!Mt.ss&&(Mt.isVpaid&&e===L||e===L&&("embeded"===t||Mt.isIframe))&&Ie(),e===M&&Mt.sourceType===J&&Fe(),Ne(),Re(),De(),rn.once(ae,function(){Ae(),e!==B&&He(),(e===L||e===D)&&(Be(),rn.on(se,function(){Ge(),T("playerSkip",en)}))}),rn.once(ae,mt)}),e===M&&rn.once(se,function(){Mt.isIframe||(pt("nextVideoOpen","campaign_"+n),at())}),rn.on(re,function(){T("playerReady",en,rn.exportPublic()),"undefined"!=typeof onVbmPlayerReady&&onVbmPlayerReady.call(null,en)}),rn.on(ae,function(){T("playerStart",en),"undefined"!=typeof onVbmPlayerStart&&onVbmPlayerStart.call(null,en)}),rn.on(ie,function(){T("playerStop",en),"undefined"!=typeof onVbmPlayerStop&&onVbmPlayerStop.call(null,en)}),rn.on(se,function(){T("playerFinish",en,an),"undefined"!=typeof onVbmPlayerFinish&&onVbmPlayerFinish.call(null,en)}),rn.on(ce,function(){st("clickUrl")}),rn.on(ue,function(t){t?JSON.stringify(t.data)||JSON.stringify(t.message):0;return Mt.sourceType===J&&Mt.nextData&&0===bt.nextCount&&!Mt.isIframe?(console.log("[vbm] vast next",Mt.nextData),at(Mt.nextData)):(T("playerError",en,t),"undefined"!=typeof onVbmPlayerError&&onVbmPlayerError.call(null,en,t),Mt.sourceType===J&&(ye=Mt.campaignId,ot("vast:error"),t.message.indexOf("skippablevideo is not supported")>0&&ot("vast:error:1005")),void(Mt.isIframe||(console.log("[vbm] error "+Mt.campaignId+" "+et()),be=!0,Mt.sourceType===W&&t&&150===t.data&&ot("emberror"),e===M||e===R||e===L||e===D?at():Ge())))}),rn.on(de,function(){rn.mute(),me.hideAll(),T("playerHide",en),jt&&A.removeClass(jt,"viboom-overroll--active")}),rn.on(pe,function(e){lt(e)});var a=oe();Lt.ratio&&A.setIntervalNow(function(){var e=Ot.offsetWidth,t=A.getHeightByRatio(e,Lt.ratio)+"px";Ht.style.height=t,(Mt.format===R||"expand"===Mt.rotatorType)&&(Ot.style.height=t)},50),A.setIntervalNow(function(){var e=Ot.offsetWidth;300>e?A.addClass(Ot,"rtp-sml"):A.removeClass(Ot,"rtp-sml")},50);var i=A.getIEVersion();i&&10>=i&&A.setIntervalNow(Ke,50);var o=1;if("controls"in Mt){var l=parseInt(Mt.controls);o=isNaN(l)?o:l}if("controls"in Vt){var l=parseInt(Vt.controls);o=isNaN(l)?o:l}rn.init({target:a,id:en,videoId:Mt.sourceId,width:Lt.width,height:Lt.height,cdnDomain:Mt.cdnDomain,hostingUrl:Mt.videoHostingUrl,previewUrl:Mt.previewUrl,format:e,quality:e===O?"medium":null,playDelay:Mt.playDelay,duration:Mt.duration,platformType:Mt.platformType,ss:Mt.ss,start:0,autoplay:N?0:Mt.autoplay,controls:o,iv_load_policy:Mt.iv_load_policy||1,campaignId:Mt.campaignId,data:Mt,skip:Ge,nativeControls:Mt.nativeControls,wrapper:Ot,player:Bt})}function C(e){function n(t){return t.children.length?e():(Rt=t,jt=t.parentNode,"facebook"===Mt.sourceType&&(A.addClass(Rt,"viboom-overroll--loading"),rn.on(re,function(){A.removeClass(Rt,"viboom-overroll--loading")})),me.detachAll(t),void e())}function r(e){if(Ot){var t=A.getRectangle(e);jt.style.top=t.top+"px",jt.style.left=t.left+"px",jt.style.width=t.width+"px",jt.style.height=t.height+"px"}}function a(e){A.addClass(jt,"rtp-hidden-overroll--hovered"),r(e.target)}me.each(function(e){var t=e.parentNode.getElementsByTagName("video")[0];t&&t.pause()});var i=Mt.overrollType||Vt.overrollType;if(Mt.sourceType===Y){var o=t.createElement("div"),l=t.createElement("div");return o.className="rtp-hidden-overroll rtp-hidden",o.append(l),t.body.append(o),Rt=l,jt=o,rn.on(re,function(){A.removeClass(o,"rtp-hidden"),me.each(function(e){A.addListener(e,"mousemove",a)}),rn.on("PLAYER_EVENT_INIT",function(){me.detachAll(),me.each(function(e){A.removeListener(e,"mousemove",a)})})}),me.onClick(function(e){}),void e()}return be&&Ee?void n(Ee):Mt.format===D&&Mt.preStart?void n(me.first()):void("embeded"!==i&&(Mt.format!==D||Mt.ss||Mt.isIframe||Mt.isVpaid)?n(me.first()):me.onClick(n))}function S(n){function r(){l=parseInt(Ot.offsetWidth),u&&(l>p?Ot.style.fontSize=p/d+"px":Ot.style.fontSize=l/d+"px"),c=A.getHeightByRatio(l,f),s=parseInt(h.offsetHeight)+c,s+=u&&Xt?parseInt(Xt.offsetHeight):0,Ot.style.height=s+"px",Ht.style.height=c+"px",m||i("100%",s+"px")}function a(){A.removeClass(Ot,"rtp-inroll--on-animation"),r(),setTimeout(function(){A.addClass(Ot,"rtp-inroll--on-animation")},10)}function i(e,t){o(function(n){n.style.width=e,n.style.minHeight=t})}function o(t){if(A.isInIframe()){var n=e.frameElement;n&&0===n.id.indexOf("google_ads")&&t(n)}}var l,s,c,u=Mt.deviceId!==te,d=32,p=768,f="16:9",m=!1,v="rtp-inroll rtp-inroll--on-animation";Mt.inrollVisible&&(v+=" rtp-inroll--on-animation-disable"),v+=u?" rtp-inroll-mobile":"",A.addClass(Ot,v),Ft=t.createElement("div"),Ft.style.height="100%",Ft.style.width="100%",A.addClass(Ft,"rtp-flyroll-inner"),Ot.append(Ft);var h=t.createElement("div");h.className="rtp-inroll-header",h.innerHTML=['<div class="rtp-inroll-close" title="'+Mt.locales.inroll_close+'"></div>','<div class="rtp-inroll-msg">'+Mt.locales.inroll_adv+"</div>",'<a class="rtp-inroll-logo" target="_blank" href="http://viboom.com" title="'+Mt.locales.inroll_viboom+'"></a>'].join(""),Ft.append(Ot.children[0]),Ft.insertBefore(h,Ft.children[0]);var g=h.firstChild;A.addListener(g,"click,touchstart",function(){st("skipUrl"),Je()}),Mt.inrollVisible||(Ot.style.height=0),rn.on(re,function(){if(He(),A.addListener(e,u?"orientationchange":"resize",a),o(r),Mt.inrollVisible?r():A.onViewport(Bt,function(e,t){r(),t()}),Mt.ss)return rn.play(),void setTimeout(function(){rn.pause()},2e3);var n=Mt.flyroll?.01:.9;if(Tt=A.onViewport(Bt,n,function(e){var n=t.hasFocus?t.hasFocus():!0;A.isInIframe()&&(n=!0);var r=rn.isPlaying();!n&&r?rn.pause():!r&&n&&(rn.play(),hasPlaying=!0)},function(){rn.isPlaying()&&rn.pause()}),rn.mute(),!u&&Mt.sourceType!==J){var l=!1;A.addListener(Bt,"mouseover,mouseout",function(e){l||rn.fluentMute("mouseout"===e.type)});try{A.addListener(rn.player.controlBar.muteToggle.el_,"click",function(){l=!0})}catch(s){}}rn.on(se,function(){m=!0,i(null,null),Je()})}),n&&n()}function x(e){return Mt.advertiserDomain?void(e&&e()):(A.addClass(jt,"rtp-target"),A.addClass(Ot,"rtp-wrapper--expanded"),Ot.style.height=0,void A.onViewport(jt,function(t,n){A.removeClass(jt,"rtp-target"),e&&e(),n()}))}function P(n){function r(){clearInterval(i),Ge(),T("playerSkip",en),t.ontouchmove=null,o.parentNode.removeChild(o),d.content=""}function a(){var t=horScale=verScale=1,n=.9,r=.9,a=e.innerWidth,i=e.innerHeight,o=parseInt(s.offsetWidth),l=parseInt(s.offsetHeight);horScale=a/o*n,verScale=i/l*r,t=Math.min(horScale,verScale),s.style.transform=u.style.transform=s.style.webkitTransform=u.style.webkitTransform=s.style.msTransform=u.style.msTransform="scale("+t+")"}var i,o=t.createElement("div"),l=t.createElement("div"),s=t.createElement("div"),c=t.createElement("div"),u=t.createElement("div"),d=t.createElement("meta"),p=A.detectBrowser();d.name="viewport",d.content="minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0","Firefox"===p?d.content="minimum-scale=1.0, maximum-scale=1.0":"Safari"===p&&(d.content="width=980"),t.head.appendChild(d),t.ontouchmove=function(e){e.preventDefault()},t.body.appendChild(o),o.appendChild(l),l.appendChild(s),s.appendChild(c),s.appendChild(Ot),l.appendChild(u),o.className="rtp-mfs",l.className="rtp-mfs-cell",s.className="rtp-mfs-content",c.className="rtp-mfs-title",c.innerHTML=Mt.title,u.className="rtp-mfs-skip",u.innerHTML="Ã—",rn.on(se,r),A.addListener(u,"click",function(){r(),st("skipUrl")}),i=A.setIntervalNow(a,300),A.addListener(e,"orientationchange,resize,touchend",a),n&&n()}function ee(){Ot=t.createElement("div"),Ot.id=tn,Ot.className="rtp-wrapper",Ht=t.createElement("div"),Ht.className="rtp-outer",Ut=t.createElement("div"),Ut.className="rtp-inner",Bt=t.createElement("div"),Bt.id=nn,Bt.className="rtp-player",Ot.style.width=A.toCssSize(Lt.width),Ht.style.height=A.toCssSize(Lt.height),A.isPercentSize(Lt.height)&&(Ot.style.height="100%"),Ot.appendChild(Ht),Ht.appendChild(Ut),Ut.appendChild(Bt)}function oe(){var e=Mt.format;return e===L||e===D||e===O?(e!==O&&(Rt.appendChild(Ot),A.addClass(jt,"viboom-overroll--active"),Mt.sourceType===Y&&A.addClass(jt,"viboom-overroll--vk"),Mt.sourceType===Z&&A.addClass(jt,"viboom-overroll--bt")),Bt.innerHTML+="<div></div>",Bt.children[0]):(jt.parentNode.replaceChild(Ot,jt),Bt.appendChild(jt),jt)}function fe(e){var n=t.createElement("div");return n.className="rtp-caption",n.innerHTML=A.lineBreaksToTagBreaks(e),n}function _e(){var e=Mt.caption,t=Mt.captionAlign||Vt.captionAlign;if(Wt&&(Wt.parentNode&&Wt.parentNode.removeChild(Wt),Wt=null),!A.isBlank(e)){Wt=fe(e);var n=A.isPercentSize(Lt.height);"top"===t?n?Ht.insertBefore(Wt,Ut):Ot.insertBefore(Wt,Ht):"bottom"===t&&(n?Ht.appendChild(Wt):Ot.appendChild(Wt)),A.getBackgroundBrightness(Wt,function(e){A.addClass(Ot,"rtp-bg-"+e)})}}function we(){var e=t.createElement("div");return e.className="rtp-text-hint rtp-skip-button",e.innerHTML=Mt.translates[2].replace("%remaning%",Dt),rn.once(ae,function(){A.addClass(e,"rtp-text-hint--hidden")}),e}function Ie(e){Yt&&(Yt.parentNode.removeChild(Yt),Yt=null),e=1===arguments.length?e:Mt.playerInteractive.textHint,(Mt.vpaidHint||e&&e.enabled)&&(Yt=we(),Bt.appendChild(Yt))}function ke(){var e=Wt?Wt.offsetHeight:0,t=parseInt(Lt.height);Ot.style.height=t+e+"px"}function Ne(){if(Mt.platformRegionId===ne){var e=t.createElement("div");e.className="rtp-promotion",e.innerHTML="promotion",Bt.appendChild(e)}}function Se(n){var r=t.createElement("img");r.src=n.src,r.className="rtp-ipicture rtp-hidden",r.style.width=n.width||"25%",r.style.height=n.height||"auto",r.style.top=n.top||"auto",r.style.right=n.right||"auto",r.style.bottom=n.bottom||"auto",r.style.left=n.left||"auto",n.height&&(r.style.width="auto"),n.top||n.bottom||(r.style.bottom="55px"),n.left||n.right||(r.style.right=0);var a=parseInt(n.time_show)||0,i=parseInt(n.time_hide)||0;return Ye(function(){A.addClass(r,"rtp-hidden")},i),Ye(function(){A.removeClass(r,"rtp-hidden")},a),A.addListener(r,"click",function(){e.open(n.url,"_blank")}),A.addListener(r,"error",function(e){r.parentNode.removeChild(r)}),r}function Ae(e){zt&&(zt.parentNode&&zt.parentNode.removeChild(zt),zt=null),e=1===arguments.length?e:Mt.playerInteractive.picture,e&&e.src&&(zt=Se(e),Bt.appendChild(zt))}function xe(n){var r=t.createElement("div"),a=t.createElement("div"),i=t.createElement("div"),o=t.createElement("div"),l=t.createElement("span");if(r.className="rtp-ibutton-container rtp-hidden",a.className="rtp-ibutton-control",i.className="rtp-ibutton",o.className="rtp-ibutton-desc",l.className="rtp-ibutton-desc-text",l.innerText=n.description||"",n.subscribe){var s="full"===n.layout?n.layout:"default";A.loadScript("https://apis.google.com/js/platform.js");var c="full"===s?"rtp-ibutton-yt--full":"rtp-ibutton-yt";A.addClass(i,c),i.innerHTML='<div class="g-ytsubscribe" data-channelid="'+n.subscribe+'" data-layout="'+s+'" data-count="default" data-theme="dark"></div>'}else if(n.subscribe_vk)A.loadScript("https://vk.com/js/api/openapi.js?127"),_t=setInterval(function(){if("undefined"!=typeof VK){var e="vk_subscribe_"+Date.now();i.innerHTML='<div class="rtp-btn-vk"><div id="'+e+'"></div><div>',VK.Widgets.Subscribe(e,{soft:1,width:"250"},n.subscribe_vk),clearInterval(_t)}},100);else{var u=t.createElement("button");u.type="button",u.className="rtp-ibutton-simple",u.innerText=n.text||"",i.appendChild(u),A.addListener(r,"click",function(){e.open(n.url,"_blank")})}(n.subscribe||n.subscribe_vk)&&A.onIframeLoad(i,function(){A.onIframeClick(i,function(){A.loadScript(n.subscribe_url)})});var d=parseInt(n.time_show)||0,p=parseInt(n.time_hide)||0;return Ye(function(){A.addClass(r,"rtp-hidden")},p),Ye(function(){A.removeClass(r,"rtp-hidden")},d),r.appendChild(a),r.appendChild(o),a.appendChild(i),o.appendChild(l),r}function Pe(e){qt&&(clearInterval(_t),Ht.removeChild(qt),qt=null),e=1===arguments.length?e:Mt.playerInteractive.button,e&&(qt=xe(e),Ht.appendChild(qt))}function Ve(e){var n=t.createElement("div");n.className="rtp-subscribe-dialog",A.loadScript("https://apis.google.com/js/platform.js"),n.innerHTML='<div><img class="" src="'+k+'/youtube-subscribe.png"><div class="g-ytsubscribe" data-channelid="'+e.channel_id+'" data-layout="default" data-count="default"></div><input type="button" value="'+Mt.locales.subscribe_refuse+'">';var r=n.firstChild.children[2];return A.addClass(n,"rtp-hidden"),Ye(function(){function t(){rn.play(),A.addClass(n,"rtp-hidden")}rn.pause(),A.removeClass(n,"rtp-hidden"),A.addListener(r,"click",t),A.onIframeLoad(n,function(n){A.onIframeClick(n,function(){t(),A.loadScript(e.subscribe_url)})})},Mt.duration/2),n}function Me(e){Gt&&(Ht.removeChild(Gt),Gt=null),e=1===arguments.length?e:Mt.playerInteractive.subscribeDialog,e&&(Gt=Ve(e),Bt.appendChild(Gt))}function Le(n){var r=t.createElement("div");r.className="rtp-textlink rtp-hidden",r.innerHTML=n.text,A.addListener(r,"click",function(){e.open(n.url,"textLink")});var a=parseInt(n.time_show)||0,i=parseInt(n.time_hide)||0;return Ye(function(){A.addClass(r,"rtp-hidden")},i),Ye(function(){A.removeClass(r,"rtp-hidden")},a),r}function De(e){Kt&&(Kt.parentNode.removeChild(Kt),Kt=null),e=1===arguments.length?e:Mt.playerInteractive.textLink,e&&e.text&&e.url&&(Kt=Le(e),Bt.appendChild(Kt))}function Oe(n){var r=t.createElement("div");r.className="rtp-social";for(var a in n)(function(a,i){if(n.hasOwnProperty(i)){var o=t.createElement("div"),l=a.type,s=a.url;o.className="rtp-soc-btn rtp-soc-btn-"+l+" rtp-hidden",o.dataset.url=s,"yt"===l||"vm"===l?(r.insertBefore(o,r.children[0]),rn.on("onPlayerStart",function(){A.removeClass(o,"rtp-soc-btn--pulse")}),rn.on("onPlayerStop",function(){A.addClass(o,"rtp-soc-btn--pulse")})):r.appendChild(o),A.addListener(o,"click,touchstart",function(){var t;switch(!0){case-1!==this.dataset.url.indexOf("http://vk.com/share.php"):case-1!==this.dataset.url.indexOf("http://odnoklassniki.ru/dk?st.cmd=addShare"):case-1!==this.dataset.url.indexOf("http://facebook.com/sharer.php"):case-1!==this.dataset.url.indexOf("http://twitter.com/intent/tweet"):t="width=600,height=280,status=no,resizable=no,top=200,left=200"}e.open(this.dataset.url,l,t)});var c=parseInt(a.time_show)||0,u=parseInt(a.time_hide)||0;Ye(function(){A.addClass(o,"rtp-hidden")},u),Ye(function(){A.removeClass(o,"rtp-hidden")},c)}})(n[a],a);return n.length||(r.style.height=0),r}function Re(e){function t(){A[Kt?"addClass":"removeClass"](Jt,"rtp-social--small");for(var e=25,t=parseInt(Jt.offsetHeight)-e,a=0,i=0;i<Jt.children.length;i++){var o=Jt.children[i];a+=n+r,a>t?o.style.display="none":o.style.display="block"}}var n=0,r=0;if(Jt&&(Jt.timer&&clearInterval(Jt.timer),Jt.parentNode.removeChild(Jt),Jt=null),e=1===arguments.length?e:Mt.playerInteractive.socialButtons,e&&(Jt=Oe(e),Bt.appendChild(Jt),Jt.children.length>1)){var a=Jt.children[1];try{n=parseInt(a.offsetHeight),r=getComputedStyle(a).getPropertyValue("margin-top")}catch(i){r=a.currentStyle.marginTop}r=parseInt(r),Jt.timer=A.setIntervalNow(t,200)}}function Be(){var e=t.createElement("button");e.className="rtp-skip-button",Mt.skip_v2&&(e.className="rtp-skip-adv"),e.id=A.getGuid(),Mt.sourceType===J&&Mt.format===D&&(e.style.opacity=0);var n,r=setInterval(function(){e.style.display="block",n=Dt-Math.floor(rn.getPlayedTime()),n>=1?e.innerHTML=Mt.translates[1].replace("%remaning%",n):(e.innerHTML=Mt.translates[0],A.addClass(e,"clickable"),Mt.skip_v2&&A.addClass(e,"adv-complete"),clearInterval(r))},100);A.addListener(e,"click,touchstart",function(){function e(){st("skipUrl"),Ge(),T("playerSkip",en)}if(!(n>=1))if(!Mt.hideSkipDelay||Mt.isVpaid)e();else if(100===Mt.hideSkipDelay)rn.emit(de);else{var t=rn.getDuration()||Mt.duration,r=rn.getCurrentTime(),a=t/100*Mt.hideSkipDelay;if(r>=a)return e();rn.emit(de);var i=setInterval(function(){var t=rn.getCurrentTime();t>=a&&(e(),clearInterval(i),i=null)},100)}}),navigator.userAgent.match(/UCBrowser/i)&&(A.addClass(e,"rtp-skip-button--outer"),A.addClass(Bt,"rtp-skip--outer")),Bt.appendChild(e)}function je(e){var n=t.createElement("div"),r=t.createElement("div");return n.className="rtp-overlay-link",r.className="rtp-overlay-link-hint",r.innerHTML=e,n.appendChild(r),n}function He(n){function r(){rn.pause(),e.open(n.url,"_blank");var r=setInterval(function(){t.hasFocus&&t.hasFocus()&&(rn.play(),clearInterval(r))},100)}var a=Mt.deviceId===te;if(Xt&&(Xt.parentNode.removeChild(Xt),Xt=null),n=1===arguments.length?n:Mt.playerInteractive.overlayLink,n&&n.url){var i=a?Mt.locales.overlay_click:Mt.locales.overlay_more+' <div class="rtp-overlay-link-more"></div>';if(Xt=je(i),A.addListener(Xt,"click,touchstart",r),A.addListener(Bt,"mouseover,mouseout",function(e){A["mouseover"===e.type?"addClass":"removeClass"](Bt,"rtp-player--on-hover")}),a){if(Bt.appendChild(Xt),Bt.style.cursor="pointer",!rn.$el)return;A.addListener(rn.$el,"click",function(e){var t=e.target||e.srcElement,n=t.className;return/vjs-control([^\-])/.test(n)||A.closest(t,".vjs-control")?void 0:(r(),!1)})}else Ot.appendChild(Xt)}}function Ue(){var e=t.createElement("button"),n=t.createElement("span");return e.className="rtp-volume-button",n.className="rtp-volume-button--icon",e.appendChild(n),e}function Fe(){var e=Ue(),t="rtp-volume-button--on";rn.isMuted()||A.addClass(e,t),A.addListener(e,"click",function(){rn.isMuted()?(A.addClass(e,t),rn.unMute()):(A.removeClass(e,t),rn.mute())}),Bt.appendChild(e)}function We(e,n){function r(e){try{e.isProxyNode&&e.proxiedNode&&(e=e.proxiedNode)}catch(t){}return e}switch(e){case V:case M:case O:case R:case B:case L:case D:var a=t.getElementById("v-"+n);if(a)return r(a);if(a=t.getElementById("s-"+n))return r(a);if(a=A.getElementByInnerText("script",n))return r(a);if(a=A.getElementBySrc("script",n))return a;throw"viboom: target "+n+' for format "'+e+'" not found';default:throw"viboom: unknown format "+e}}function ze(){var e={width:Mt.width||Vt.width,height:Mt.height||Vt.height,ratio:Mt.ratio||Vt.ratio};return Mt.sourceType===H&&(e.width<400&&(e.width=400),e.height<300&&(e.height=300)),(Mt.format===B||e.ratio)&&(e.width=e.width||"100%"),(Mt.format===L||Mt.format===D)&&(e.width="100%",e.height="100%"),e.width=e.width||640,e.height=e.height||360,e}function qe(){var e=Vt.container,n=Vt.position,r=Vt.className;if("string"==typeof e)try{e=t.querySelectorAll(e)}catch(a){e=null}if(!e)return console.log("[vbm] cannot find container for player"),!1;var i=t.createElement("div");if(i.id="v-"+Pt.sig,!n){switch(A.getFormatId(Pt.format)){case L:case D:e.forEach?e.forEach(function(e){"SCRIPT"!==e.tagName&&A.addClass(e,xt)}):A.addClass(e,xt);break;default:e.forEach&&(e=e[0]),e.appendChild(i)}return!0}var o=t.createElement("div");o.className=r||"",o.appendChild(i);var l=n.match(/(\w+)(\d+)/),s=l[1],c=0|l[2],u=e.getElementsByTagName(s),d=u[c-1];return d?A.insertAfter(o,d):(console.log("[vbm] cannot find "+n+", insert to end"),e.appendChild(o)),!0}function Ge(){if(!Mt.isIframe&&(console.log("[vbm] skip after "+Mt.campaignId+" "+et()),$t&&clearInterval($t),Ce.del(en),Ot||rn)){var e=Ot.parentNode;if(Mt.format===L||Mt.format===D)!Mt.iframeId||Mt.nextData||be?me.detachAll():(me.hideAll(),setTimeout(function(){me.detachAll()},1e3)),jt&&(A.removeClass(jt,"viboom-overroll--active"),Mt.sourceType===Y&&jt.parentNode.replaceChild(t.createElement("div"),jt));else{if(!e)return;e.replaceChild(jt,Ot)}if(T("playerClose",en),"undefined"!=typeof onVbmPlayerSkipped&&onVbmPlayerSkipped.call(null,en),rn.remove(),Ze(),(Mt.format===L||Mt.format===D)&&Mt.deviceId===te){if(be)return me.appendAll(),void(Ee=me.findOverlay(jt));if(Mt.untouch)return;try{A.forEachChildrens(jt,function(e){"iframe"===e.tagName.toLowerCase()&&e.src?e.src=e.src+(/\?/.test(e.src)?"&":"?")+"autoplay=1":"video"===e.tagName.toLowerCase()&&e.src&&e.play()})}catch(n){}}}}function Je(){Tt&&clearInterval(Tt),Ot.style.height="0",setTimeout(function(){rn.mute(),rn.pause(),Ge(),T("playerSkip",en)},500)}function Ke(){var e,t=Ot.parentNode,n=Lt.height,r=Wt?parseInt(Wt.offsetHeight):0,a=qt?parseInt(qt.offsetHeight):0;if(A.isPercentSize(n)){var i=A.getOuterHeight(t);e=i/100*parseInt(n)}else e=parseInt(n);var o=e-r-a;Bt.style.height=o+"px"}function Ye(e,t){rn.currentTimeHandler(e,t)}function Xe(e,t){rn.playedTimeHandler(e,t)}function Qe(){Ze(),Ct=A.setIntervalNow($e,100)}function $e(e){if(t.getElementById(nn)||e){var n=Mt.playbackInterval,r=rn.getCurrentTime();if(Mt.playbackByPlay&&!N&&(r=rn.getPlayedTime()),e&&n&&(r=Math.round(r/n)*n),n){var a=r%n;if(1.5>a){var i=Math.floor(r);i=1>a?i:i-1,dt(i)}ut()}}}function Ze(){Ct&&clearInterval(Ct)}function et(e){return(e||Mt.format)+"_"+(en||tn)}function tt(t,r){function a(e,t){A.checkVast(e.sourceId,function(n,r){return n?(console.log("[vbm] vast error "+e.campaignId+" "+l+" ("+n.message+")"),ve[Pt.format]=ve[Pt.format]||[],ve[Pt.format].push(e.campaignId),ye=e.campaignId,be=!0,s=!0,bt.nextCount++,void tt(Pt,Vt)):(e.vastText=r,void t(e))})}Pt=t||Pt,Vt=r||Vt,en=Pt.sig;var i=0,o=A.getFormatId(t.format),l=et(o),s=!1;if(!Vt.container||qe()){(o===L||o===D)&&me.appendAll(),console.time("[vbm] uid "+l),nt(function(r){console.timeEnd("[vbm] uid "+l),r||(r=A.md5(""+Date.now()+Math.random()),i=1),Te.set("vbmuid",r),bt.vbmuid=r,ft(r);var o="";try{o=e.top.location.href}catch(s){o=e.location.href}var c=o;o=Vt.referer||o;var u=ve[Pt.format]||[],d={shown:u,referer:o,origReferer:c,n:i,rtrCampaignId:e.rtrCampaignId};Vt.adv&&(d.adv=1),t.data=JSON.stringify(d),t.vbmuid=r,console.time("[vbm] get "+l),A.getJSONP(k+"/video/get/",t,function(e){return console.timeEnd("[vbm] get "+l),mt(),e.sourceType===J&&!e.vastVideo&&ye!==e.campaignId&&bt.nextCount<=2?a(e,n):void n(e)},{callback:"sig"})});var c=Date.now();yt("content",function(e){s||(c=Date.now()-c,console.log("[vbm] content "+(e||"empty")+" "+l+": "+c+"ms"))})}}function nt(e){if(bt.vbmuid)return e(bt.vbmuid);var t=A.isHash32(Te.get("vbmuid"))||A.isHash32("");return t&&Math.random()>.1?e(t):void A.sendRequest({url:"//level1cdn.com/uid/",timeout:1e3},{uid:t},function(n,r){t=A.isHash32(r)||t,e(t)})}function rt(){var n=Mt.stopwords||[];if("string"==typeof n)try{n=JSON.parse(A.base64.decode(n))}catch(r){console.log("[vbm] parse error"),console.error(r),n=[]}if(0===n.length)return!1;var a=t.body.innerHTML;try{a+=e.parent.document.body.innerHTML,e.parent!=e.top&&(a+=e.top.document.body.innerHTML)}catch(r){}a=a.replace(/<script.*?>[\s\S]*?<\/script>/gim," "),a=a.replace(/<select.*?>[\s\S]*?<\/select>/gim," "),a=a.replace(/(<.*?>)/gim," "),a=a.replace(/\s+/gim," ");var i={template:"[^a-zÐ°-ÑÑ‘](TARGET)[^a-zÐ°-ÑÑ‘]",get:function(e){var t=this.template.replace("TARGET",e);return new RegExp(t,"i")}},o=[];return n.forEach(function(e){e=e.replace(/\s+/g," ");for(var t=e.split("&"),n=!0,r=0;r<t.length;++r)if(!a.match(i.get(t[r]))){n=!1;break}n&&(console.log("[vbm] viboom: stopword "+e+" founded"),o.push(e))}),0!==o.length?o.slice(0,20):!1}function at(e){if(!Mt.isIframe){console.log("[vbm] next after "+Mt.campaignId+" "+et()),Ge();var t=new I;t.nextCount=++bt.nextCount,e?t.init(e):t.getContent(Pt,Vt)}}function it(e,t){if(Mt.actionUrl){var n={vbmuid:bt.vbmuid,key:Mt.actionKeys[e],type:e[0]};if(Mt.format===L){var r=Mt.overrollType||Vt.overrollType;n.embeded=+("embeded"===r)}A.getJSONP(Mt.actionUrl,n,function(e){t&&t(e)},{sig:!0})}}function ot(t,n){var r="";try{r=e.top.location.href}catch(a){r=e.location.href}var i={cid:Mt.campaignId,type:t,referer:r,plid:Mt.platformId,format:Mt.format,vpaid:+!!Mt.isVpaid};n&&(i.data=JSON.stringify(n)),A.loadPixel(k+"/test/action",i)}function lt(e){e&&0!==e.length&&A.loadPixel(k+"/video/choice/",{id:Mt.choiceId,answers:e,uid:bt.vbmuid},!0)}function st(e){var t=Mt.tracking;t[e]&&([].concat(t[e]).forEach(function(e){A.loadPixel(e)}),delete t[e])}function ct(e){A.loadScript(Mt.interruptUrl,{accessId:Mt.accessId,event:e},!0)}function ut(){if(Mt.viewabilityUrl){Nt+=100,St+=rn.getVolume()?100:0,At+=A.isInViewport(Bt)>.5?100:0;var e=500*(Mt.playbackInterval||10);Nt%e===0&&(A.loadScript(Mt.viewabilityUrl,{accessId:Mt.accessId,totalTime:Nt,viewabilityTime:At,volubilityTime:St},!0),Nt=0,St=0,At=0)}}function dt(t){var n=1,r=2;if(Mt.playbackUrl){var a=Et[t];if(!a||a.entry!=r||a.plays!=r||a.permanent!=r){Et[t]=a||{entry:n,plays:n,permanent:kt?r:n};var i=[],o=[],l=[];for(var s in Et){var a=Et[s];a.entry==n&&(i.push(s),a.entry=r),Et[-1]&&(a.plays==n&&(o.push(s),a.plays=r),a.permanent==n&&(l.push(s),a.permanent=r))}if(i.length||o.length||l.length){var c={accessId:Mt.accessId,vbmuid:bt.vbmuid};i.length&&(c.entry=i),o.length&&(c.plays=o),l.length&&(c.permanent=l),N||A.loadPixel(k+"/video/debug/",{entry:c.entry?JSON.stringify(c.entry):"",plays:c.plays?JSON.stringify(c.plays):"",permanent:c.permanent?JSON.stringify(c.permanent):"",currentTime:rn.getCurrentTime(),playedTime:rn.getFollowingPlayedTime(),vbmuid:bt.vbmuid,deviceId:Mt.deviceId,campaignId:Mt.campaignId,userAgent:navigator.userAgent,referer:e.location.href}),A.loadScript(Mt.playbackUrl,c,!0)}}}}function pt(t,n){N&&!Mt.ym_disable&&(Math.random()>.1||e.viboomYM&&viboomYM.params({action:t,label:n}))}function ft(e){e&&N&&A.loadScript("//x01.aidata.io/pixel.js?pixel=VIBOOM&id="+e+"&v="+Date.now())}function mt(){Mt.needDetect&&N&&A.loadScript("//apicaller.ru/",{uid:bt.vbmuid})}function vt(e,t){T("content",e,t),"undefined"!=typeof onVbmContent&&onVbmContent(e,t),t?"undefined"!=typeof onVbmHasContent&&onVbmHasContent(e):"undefined"!=typeof onVbmNoContent&&onVbmNoContent(e)}function ht(e){var n=We(M,en);if(n){var r=t.createElement("div");A.insertHtml(e,r),[].slice.call(r.children).forEach(function(e){n.parentNode.insertBefore(e,n)}),n.parentNode.removeChild(n)}}function gt(e,t){return _(en,e,t),this}function yt(e,t){return w(en,e,t),this}var bt=this,Et={},Ct=null,Tt=null,_t=null,wt=!1,It=!1,kt=0,Nt=0,St=0,At=0,xt="viboom-overroll",Pt={},Vt={},Mt={},Lt={},Dt=0,Ot=null,Rt=null,Bt=null,jt=null,Ht=null,Ut=null,Ft=null,Wt=null,zt=null,qt=null,Gt=null,Jt=null,Kt=null,Yt=null,Xt=null,Qt=null,$t=null,Zt=null;bt.init=n,bt.getContent=tt,bt.on=gt,bt.once=yt,bt.addSocialButtons=Re,bt.addTextLink=De,bt.addOverlayLink=He,bt.addInteractiveButton=Pe,bt.addInteractivePicture=Ae,bt.addTextHint=Ie,bt.skipVideo=Ge;var en=null,tn=A.getGuid(),nn=A.getGuid(),rn=null;bt.Util=A,bt.nextCount=0;var an=!1}e.vbm=e.vbm||function(){(e.vbm.q=e.vbm.q||[]).push(arguments)};var k="https://aurabom.ru",N=true,S=false;if(!e.VbmVideo){var A={inherits:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.superClass_=t.prototype},appendCSS:function(e){var n=t.createElement("style");n.innerHTML=e,t.head.appendChild(n)},createStyleElement:function(e,n){var r=t.createElement("style");if(r.type="text/css","object"==typeof e&&(e=this.stylesToCssString(e)),r.styleSheet)r.styleSheet.cssText=e;else{var a=t.createTextNode(e);r.appendChild(a)}return n&&n.appendChild(r),r},stylesToCssString:function(e){var t,n,r,a,i;i="";for(t in e){n=e[t],i+=t+" {";for(r in n)a=n[r],r=r.replace(/[a-z][A-Z]/,function(e){return e.split("").join("-")}),i+=r+" : "+a+";";i+="} "}return i},getStyleValue:function(e,t){var n;try{n=getComputedStyle(e).getPropertyValue(t)}catch(r){n=current.currentStyle[t]}return n},toCssSize:function(e){return String(e).replace(/([^\%])$/,"$1px")},isPercentSize:function(e){return"string"==typeof e&&/%/.test(e)},addClass:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");n.test(e.className)||(e.className=(e.className+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,""))},removeClass:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")},loadScript:function(e,n,r){2===arguments.length&&(r=!1),n&&(e+=this.stringifyParams(n,r));var a=t.createElement("script");a.src=e,a.async=!0,a.vbm=!0;var i=t.getElementsByTagName("script")[0];return i.parentNode.insertBefore(a,i),a},getJSONP:function(t,n,r,a){a=a||{},n=n||{};var i=a.callback||"callback",o=n[i]||this.getGuid();n[i]=o;var l=null;a.timeout&&(l=setTimeout(function(){r(new Error("timeout")),e[o]=function(){}},a.timeout)),e[o]=function(){l&&clearTimeout(l),r.apply(null,arguments)},this.loadScript(t,n,a.sig);
},loadPixel:function(e,n,r,a){var i=t.createElement("img");n&&(e+=this.stringifyParams(n,r)),i.className="rtp-pixel",i.src=e,i.width=1,i.height=1,i.style.position="absolute",i.style.left="-99px",i.style.top="0px",i.style.display="block",i.style.border="none",(t.body||t.head).appendChild(i),a&&(i.onload=function(){a(null)},i.onerror=function(e){a(e)})},sendRequest:function(e,t,n){function r(){n&&n.apply(null,arguments),n=null}function a(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?(n.withCredentials=!0,n.open(e,t,!0)):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest,n.open(e,t)):n=null,n}var i="GET",o=!1,l=0;"object"==typeof e&&(i=i||e.method,o=o||e.signature,l=e.timeout,e=e.url),t&&(e+=this.stringifyParams(t,o));var s=a(i,e);return l&&setTimeout(function(){r(new Error("timeout "+l+"ms"))},l),s?(s.onload=function(){var e=s.response;if(e){var t=null,n=null;try{n=JSON.parse(e)}catch(a){try{n=(new X2JS).xml_str2json(e)}catch(a){t=new Error("sendRequest JSON/XML parser failed"),console.error(t)}}r(t,n,e)}else r(null,null)},s.onerror=function(e){r(new Error("Request error "+e.target.status))},void s.send()):r(new Error("CORS not supported"))},checkVast:function(e,t){this.sendRequest({url:e,timeout:5e3},{},function(e,n,r){if(e)return t(e.message);var a=null;try{a=n.VAST.Ad}catch(i){console.log(i)}return a?void t(null,r):t(new Error("no ads"))})},initYM:function(){!function(e,t,n){(t[n]=t[n]||[]).push(function(){try{t.viboomYM=new Ya.Metrika({id:36124145,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})}catch(e){}});var r=e.getElementsByTagName("script")[0],a=e.createElement("script"),i=function(){r.parentNode.insertBefore(a,r)};a.type="text/javascript",a.async=!0,a.src="https://mc.yandex.ru/metrika/watch.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",i,!1):i()}(t,e,"yandex_metrika_callbacks")},stringifyParams:function(e,t){var n=[];t===!0&&(e.sig=this.getSig(e));for(var r in e)e.hasOwnProperty(r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n=n.join("&"),n?"?"+n:""},loadCSS:function(e){var n=t.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),t.getElementsByTagName("head")[0].appendChild(n)},insertAfter:function(e,t){var n=t.parentNode,r=t.nextSibling;return r?n.insertBefore(e,r):n.appendChild(e)},getElementBySrc:function(e,n){for(var r=t.getElementsByTagName(e),a=0,i=r.length;i>a;a++)if(-1!==r[a].src.search(n)&&!r[a].vbm)return r[a];return null},getElementByInnerText:function(e,n){for(var r=t.getElementsByTagName(e),a=0,i=r.length;i>a;a++){var o=r[a].innerText||r[a].textContent;if(-1!==o.search(n))return r[a]}return null},getElementByClassName:function(e,n,r){var a=[];if(r=r||t,t.getElementsByClassName)a=r.getElementsByClassName(n);else for(var i=r.getElementsByTagName(e),o=0;o<=i.length;o++)try{i[o].className===n&&a.push(i[o])}catch(l){}return a.length?a:null},detectBrowser:function(){var n={};n.Opera=!!e.opera||/ OPR\//.test(navigator.userAgent),n.Firefox="undefined"!=typeof InstallTrigger,n.Safari=Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0,n.Chrome=!!e.chrome&&!n.Opera,n.IE=!!t.documentMode;for(var r in n)if(n[r])return r},getIEVersion:function(){var e=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return e?parseInt(e[1]):void 0},getFlashVersion:function(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(t){return"6,0,0"}}catch(t){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){}}return"0,0,0"},getRectangle:function(e){var n={top:0,left:0,width:0,height:0};if(!e)return n;if("string"==typeof e&&(e=t.getElementById(e)),"object"!=typeof e)return n;if("undefined"!=typeof e.offsetTop)for(n.height=parseInt(e.offsetHeight),n.width=parseInt(e.offsetWidth),n.left=n.top=0;e&&"BODY"!=e.tagName;)n.top+=parseInt(e.offsetTop),n.left+=parseInt(e.offsetLeft),e=e.offsetParent;return n},setIntervalNow:function(e){return e.apply(null,[].slice.call(arguments,2)),setInterval.apply(null,arguments)},onCondition:function(e,t){if(e())return t();var n=setInterval(function(){e()&&(clearInterval(n),t())},100)},onGlobalVar:function(t,n){A.onCondition(function(){return"undefined"!=typeof e[t]},n)},onIframeLoad:function(e,t){var n;A.onCondition(function(){return n=e.getElementsByTagName("iframe")[0]},function(){t(n)})},onIframeClick:function(e,n){var r=t.activeElement;this.addListener(e,"mouseover",function(){r=t.activeElement}),this.addListener(e,"mouseout",function(){var e=t.activeElement;r!==e&&(n(),r=e)})},isInIframe:function(){try{return e.self!==e.top}catch(t){return!0}},isBlank:function(e){return!e||/^\s*$/.test(e)},lineBreaksToTagBreaks:function(e){return e.replace(/(\r\n|\n|\r)/gm,"<br />")},getFormatId:function(e){var t=parseInt(e);if(t)return t;var n={manual:V,video:V,rotator:M,overroll:L,preroll:D,mobile_fullscreen:O,inread:R,inroll:B};return n[e]||V},getOuterHeight:function(e){var t=0,n=0,r=0,a=0;try{var i=getComputedStyle(e);t=i.getPropertyValue("border-top-width"),n=i.getPropertyValue("border-bottom-width"),r=i.getPropertyValue("padding-top"),a=i.getPropertyValue("padding-bottom")}catch(o){var l=e.currentStyle;t=l.borderTopWidth,n=l.borderBottomWidth,r=l.paddingTop,a=l.paddingBottom}return parseInt(e.offsetHeight)-parseInt(t)-parseInt(n)-parseInt(r)-parseInt(a)},getHeightByRatio:function(e,t){var n=1;if("number"==typeof t||-1!==t.indexOf("."))n=parseFloat(t);else if(-1!==t.indexOf(":")){var r=[];t.split(":").forEach(function(e){r.push(+e)}),n=r[1]/r[0]}return e*n},forEachChildrens:function(e,t){[].slice.call(e.children).forEach(function(e,n){t(e,n),A.forEachChildrens(e,t)})},insertHtml:function(e,n){n.innerHTML=e;for(var r=n.getElementsByTagName("script"),a=0,i=r.length;i>a;a++){var o=t.createElement("script");[].slice.call(r[a].attributes).forEach(function(e){o.setAttribute(e.name,e.value)}),o.innerHTML=r[a].innerHTML,r[a].parentNode.replaceChild(o,r[a])}return n},getPosition:function(e){var t=0,n=0;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=r.left,n=r.top}else for(;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}},isInViewport:function(t){var n=0,r=A.getPosition(t),a=t.offsetHeight,i=r.y-e.innerHeight,o=r.y+a;return i=0>=i?Math.abs(i/a):!1,o=o>=0?Math.abs(o/a):!1,i&&o&&(n=1>=i?i:o,n=n>1?1:n),n},onViewport:function(e,t,n,r){function a(){n=null}function i(){r=null}"function"==typeof t&&(r=n,n=t,t=.001);var o=setInterval(function(){var l=A.isInViewport(e);l>=t?n?n(l,a):a():r?r(l,i):i(),n||r||clearInterval(o)},100);return o},onCSSLoaded:function(e,n){function r(){var e;try{e=getComputedStyle(a).zIndex}catch(t){e=a.currentStyle.zIndex}777==e&&(n&&n(),clearInterval(i))}var a=t.getElementById(e);a||(a=t.createElement("div"),a.id=e,a.style.position="absolute",a.style.display="none",t.body.appendChild(a));var i=setInterval(r,10);r()},getBackgroundBrightness:function(t,n){function r(t){for(var n="";"html"!=t.tagName.toLowerCase();){try{n=e.getComputedStyle(t).getPropertyValue("background-color")}catch(r){n=current.currentStyle.backgroundColor}if("rgba(0, 0, 0, 0)"!=n&&"transparent"!=n)break;t=t.parentNode}return n}var a,i,o,l,s,c=r(t);if(c.match(/^rgb/))c=c.match(/rgba?\(([^)]+)\)/)[1],c=c.split(/ *, */).map(Number),a=c[0],i=c[1],o=c[2],l=c[3];else if("#"==c[0]&&7==c.length)a=parseInt(c.slice(1,3),16),i=parseInt(c.slice(3,5),16),o=parseInt(c.slice(5,7),16);else if("#"==c[0]&&4==c.length)a=parseInt(c[1]+c[1],16),i=parseInt(c[2]+c[2],16),o=parseInt(c[3]+c[3],16);else if(["transparent","rgba(0, 0, 0, 0)",""].indexOf(c)>=0)return void n("light");s=(299*a+587*i+114*o)/1e3,n(0===l||s>125?"light":"dark")},getGuid:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return String.fromCharCode(97+Math.floor(25*Math.random()))+e()+e()+e()+e()},addListener:function(e,t,n){t=t.split(",");for(var r in t)e.addEventListener?e.addEventListener(t[r],n,!1):e.attachEvent("on"+t[r],n,!1)},removeListener:function(e,t,n){t=t.split(",");for(var r in t)e.removeEventListener&&e.removeEventListener(t[r],n,!1),e.detachEvent&&e.detachEvent("on"+t[r],n)},getSig:function(e){var t=[],n=["sig","vbmuid","data"];e=this.sortByKey(e);for(var r in e)-1===n.indexOf(r)&&t.push(r+"="+e[r]);return this.md5(t.join(";")+"78701cd770d0d42").substr(16)},sortByKey:function(e){var t=[];for(var n in e)t.push(n);t.sort();for(var r={},a=0;a<t.length;a++)r[t[a]]=e[t[a]];return r},getParameterByName:function(t){var n=RegExp("[?&]"+t+"=([^&]*)").exec(e.location.search);return n&&decodeURIComponent(n[1].replace(/\+/g," "))},isHash32:function(e){return"string"==typeof e&&32===e.length?e:!1},closest:function(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!n.call(e,t);)e=e.parentElement;return e},base64:{decode:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=(function(e){for(var t={},n=0,r=e.length;r>n;n++)t[e.charAt(n)]=n;return t}(t),String.fromCharCode),r=new RegExp(["[Ã€-ÃŸ][Â€-Â¿]","[Ã -Ã¯][Â€-Â¿]{2}","[Ã°-Ã·][Â€-Â¿]{3}"].join("|"),"g"),a=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return n((r>>>10)+55296)+n((1023&r)+56320);case 3:return n((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return n((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},i=function(e){return e.replace(r,a)},o=function(e){return i(atob(e))};return o(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))}},md5:function(e){var t,n,r,a,i,o,l,s,c,u=function(e,t){return e<<t|e>>>32-t},d=function(e,t){var n,r,a,i,o;return a=2147483648&e,i=2147483648&t,n=1073741824&e,r=1073741824&t,o=(1073741823&e)+(1073741823&t),n&r?2147483648^o^a^i:n|r?1073741824&o?3221225472^o^a^i:1073741824^o^a^i:o^a^i},p=function(e,t,n){return e&t|~e&n},f=function(e,t,n){return e&n|t&~n},m=function(e,t,n){return e^t^n},v=function(e,t,n){return t^(e|~n)},h=function(e,t,n,r,a,i,o){return e=d(e,d(d(p(t,n,r),a),o)),d(u(e,i),t)},g=function(e,t,n,r,a,i,o){return e=d(e,d(d(f(t,n,r),a),o)),d(u(e,i),t)},y=function(e,t,n,r,a,i,o){return e=d(e,d(d(m(t,n,r),a),o)),d(u(e,i),t)},b=function(e,t,n,r,a,i,o){return e=d(e,d(d(v(t,n,r),a),o)),d(u(e,i),t)},E=function(e){for(var t,n=e.length,r=n+8,a=(r-r%64)/64,i=16*(a+1),o=Array(i-1),l=0,s=0;n>s;)t=(s-s%4)/4,l=s%4*8,o[t]=o[t]|e.charCodeAt(s)<<l,s++;return t=(s-s%4)/4,l=s%4*8,o[t]=o[t]|128<<l,o[i-2]=n<<3,o[i-1]=n>>>29,o},C=function(e){var t,n,r="",a="";for(n=0;3>=n;n++)t=e>>>8*n&255,a="0"+t.toString(16),r+=a.substr(a.length-2,2);return r},T=Array(),_=7,w=12,I=17,k=22,N=5,S=9,A=14,x=20,P=4,V=11,M=16,L=23,D=6,O=10,R=15,B=21;for(e=this.utf8_encode(e),T=E(e),o=1732584193,l=4023233417,s=2562383102,c=271733878,t=0;t<T.length;t+=16)n=o,r=l,a=s,i=c,o=h(o,l,s,c,T[t+0],_,3614090360),c=h(c,o,l,s,T[t+1],w,3905402710),s=h(s,c,o,l,T[t+2],I,606105819),l=h(l,s,c,o,T[t+3],k,3250441966),o=h(o,l,s,c,T[t+4],_,4118548399),c=h(c,o,l,s,T[t+5],w,1200080426),s=h(s,c,o,l,T[t+6],I,2821735955),l=h(l,s,c,o,T[t+7],k,4249261313),o=h(o,l,s,c,T[t+8],_,1770035416),c=h(c,o,l,s,T[t+9],w,2336552879),s=h(s,c,o,l,T[t+10],I,4294925233),l=h(l,s,c,o,T[t+11],k,2304563134),o=h(o,l,s,c,T[t+12],_,1804603682),c=h(c,o,l,s,T[t+13],w,4254626195),s=h(s,c,o,l,T[t+14],I,2792965006),l=h(l,s,c,o,T[t+15],k,1236535329),o=g(o,l,s,c,T[t+1],N,4129170786),c=g(c,o,l,s,T[t+6],S,3225465664),s=g(s,c,o,l,T[t+11],A,643717713),l=g(l,s,c,o,T[t+0],x,3921069994),o=g(o,l,s,c,T[t+5],N,3593408605),c=g(c,o,l,s,T[t+10],S,38016083),s=g(s,c,o,l,T[t+15],A,3634488961),l=g(l,s,c,o,T[t+4],x,3889429448),o=g(o,l,s,c,T[t+9],N,568446438),c=g(c,o,l,s,T[t+14],S,3275163606),s=g(s,c,o,l,T[t+3],A,4107603335),l=g(l,s,c,o,T[t+8],x,1163531501),o=g(o,l,s,c,T[t+13],N,2850285829),c=g(c,o,l,s,T[t+2],S,4243563512),s=g(s,c,o,l,T[t+7],A,1735328473),l=g(l,s,c,o,T[t+12],x,2368359562),o=y(o,l,s,c,T[t+5],P,4294588738),c=y(c,o,l,s,T[t+8],V,2272392833),s=y(s,c,o,l,T[t+11],M,1839030562),l=y(l,s,c,o,T[t+14],L,4259657740),o=y(o,l,s,c,T[t+1],P,2763975236),c=y(c,o,l,s,T[t+4],V,1272893353),s=y(s,c,o,l,T[t+7],M,4139469664),l=y(l,s,c,o,T[t+10],L,3200236656),o=y(o,l,s,c,T[t+13],P,681279174),c=y(c,o,l,s,T[t+0],V,3936430074),s=y(s,c,o,l,T[t+3],M,3572445317),l=y(l,s,c,o,T[t+6],L,76029189),o=y(o,l,s,c,T[t+9],P,3654602809),c=y(c,o,l,s,T[t+12],V,3873151461),s=y(s,c,o,l,T[t+15],M,530742520),l=y(l,s,c,o,T[t+2],L,3299628645),o=b(o,l,s,c,T[t+0],D,4096336452),c=b(c,o,l,s,T[t+7],O,1126891415),s=b(s,c,o,l,T[t+14],R,2878612391),l=b(l,s,c,o,T[t+5],B,4237533241),o=b(o,l,s,c,T[t+12],D,1700485571),c=b(c,o,l,s,T[t+3],O,2399980690),s=b(s,c,o,l,T[t+10],R,4293915773),l=b(l,s,c,o,T[t+1],B,2240044497),o=b(o,l,s,c,T[t+8],D,1873313359),c=b(c,o,l,s,T[t+15],O,4264355552),s=b(s,c,o,l,T[t+6],R,2734768916),l=b(l,s,c,o,T[t+13],B,1309151649),o=b(o,l,s,c,T[t+4],D,4149444226),c=b(c,o,l,s,T[t+11],O,3174756917),s=b(s,c,o,l,T[t+2],R,718787259),l=b(l,s,c,o,T[t+9],B,3951481745),o=d(o,n),l=d(l,r),s=d(s,a),c=d(c,i);var j=C(o)+C(l)+C(s)+C(c);return j.toLowerCase()},utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}};Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=[];return arguments.length>1&&(n=[].slice.call(arguments,1)),function(){var r=[].slice.call(arguments);return t.apply(e,n.concat(r))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;r>n;n++)if(this[n]===e)return n;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=0,r=this.length;r>n;++n)e.call(t||this,this[n],n,this)});var x=function(){function e(e,t,n,r){var a=this;if(a.db=e,a.name=t,a.setter=r,"function"!=typeof n)return void(a.data=n);a.getter=n;try{var i=a.getter();i=i&&"object"==typeof i?i:{},a.data=i}catch(o){a.data={}}}function t(e,t,n){var r=this;r.db=e,r.name=t,r.data=n}var n=e.prototype;n.set=function(e,t){var n=this;return n.data[e]=t,n.save(e),n},n.get=function(e){var t=this;return 0===arguments.length?t.data:t.data[e]},n.save=function(e){var t=this,n=t.db;if("function"==typeof t.setter)try{t.setter(e)}catch(r){}return n&&n.save&&n.save(t.name),t},n.list=function(e){var n=this,r=n.data,a=r[e];if(a&&"string"==typeof a)try{a=JSON.parse("["+a+"]")}catch(i){}return r[e]=a instanceof Array?a:[],new t(n,e,r[e])},n.map=function(t){var n=this,r=n.data;return("object"!=typeof r[t]||null===r[t])&&(r[t]={}),new e(n,t,r[t])},n.json=function(t){var n=this,r=n.data;return"string"!=typeof r[t]&&(r[t]="{}"),new e(n,t,function(){var e=r[this.name];return e?JSON.parse(e):null},function(){var e=this;r[e.name]=JSON.stringify(e.data)})},n.toString=function(){return JSON.stringify(this.data)};var r=t.prototype;return r.toString=n.toString,r.get=n.get,r.set=n.set,r.save=n.save,r.kick=function(e){var t=this,n=t.data;return-1==n.indexOf(e)?n.push(e):n.splice(0,n.length,e),t.save(t.name),t},r.push=function(e,t){var n=this,r=n.data;return r.push(e),t&&r.splice(0,r.length-t),n.save(n.name),n},r.touch=function(e){var t=this,n=t.data;return-1===n.indexOf(e)&&n.push(e),t.save(t.name),t},e}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=x),A.inherits(r,n),A.inherits(a,r),A.inherits(i,r),A.inherits(o,r),A.inherits(l,r),A.inherits(s,r),function(e,t){e.X2JS=t()}(this,function(){return function(t){"use strict";function n(){void 0===t.escapeMode&&(t.escapeMode=!0),t.attributePrefix=t.attributePrefix||"_",t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!1),t.xmlElementsFilter=t.xmlElementsFilter||[],t.jsonPropertiesFilter=t.jsonPropertiesFilter||[],void 0===t.keepCData&&(t.keepCData=!1)}function r(){}function a(e){var t=e.localName;return null==t&&(t=e.baseName),(null==t||""==t)&&(t=e.nodeName),t}function i(e){return e.prefix}function o(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function l(e,t,n,r){for(var a=0;a<e.length;a++){var i=e[a];if("string"==typeof i){if(i==r)break}else if(i instanceof RegExp){if(i.test(r))break}else if("function"==typeof i&&i(t,n,r))break}return a!=e.length}function s(e,n,r){switch(t.arrayAccessForm){case"property":e[n]instanceof Array?e[n+"_asArray"]=e[n]:e[n+"_asArray"]=[e[n]]}!(e[n]instanceof Array)&&t.arrayAccessFormPaths.length>0&&l(t.arrayAccessFormPaths,e,n,r)&&(e[n]=[e[n]])}function c(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var a=60*t[6]+Number(t[7]),i=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";a=0+("-"==i?-1*a:a),n.setMinutes(n.getMinutes()-a-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function u(e,n,r){if(t.datetimeAccessFormPaths.length>0){var a=r.split(".#")[0];return l(t.datetimeAccessFormPaths,e,n,a)?c(e):e}return e}function d(e,n,r,a){return n==k.ELEMENT_NODE&&t.xmlElementsFilter.length>0?l(t.xmlElementsFilter,e,r,a):!0}function p(e,n){if(e.nodeType==k.DOCUMENT_NODE){for(var r=new Object,o=e.childNodes,l=0;l<o.length;l++){var c=o.item(l);if(c.nodeType==k.ELEMENT_NODE){var f=a(c);r[f]=p(c,f)}}return r}if(e.nodeType==k.ELEMENT_NODE){var r=new Object;r.__cnt=0;for(var o=e.childNodes,l=0;l<o.length;l++){var c=o.item(l),f=a(c);if(c.nodeType!=k.COMMENT_NODE){var m=n+"."+f;d(r,c.nodeType,f,m)&&(r.__cnt++,null==r[f]?(r[f]=p(c,m),s(r,f,m)):(null!=r[f]&&(r[f]instanceof Array||(r[f]=[r[f]],s(r,f,m))),r[f][r[f].length]=p(c,m)))}}for(var v=0;v<e.attributes.length;v++){var h=e.attributes.item(v);r.__cnt++,r[t.attributePrefix+h.name]=h.value}var g=i(e);return null!=g&&""!=g&&(r.__cnt++,r.__prefix=g),null!=r["#text"]&&(r.__text=r["#text"],r.__text instanceof Array&&(r.__text=r.__text.join("\n")),t.stripWhitespaces&&(r.__text=r.__text.trim()),delete r["#text"],"property"==t.arrayAccessForm&&delete r["#text_asArray"],r.__text=u(r.__text,f,n+"."+f)),null!=r["#cdata-section"]&&(r.__cdata=r["#cdata-section"],delete r["#cdata-section"],"property"==t.arrayAccessForm&&delete r["#cdata-section_asArray"]),0==r.__cnt&&"text"==t.emptyNodeForm?r="":1==r.__cnt&&null!=r.__text?r=r.__text:1!=r.__cnt||null==r.__cdata||t.keepCData?r.__cnt>1&&null!=r.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==r.__text||""==r.__text.trim())&&delete r.__text:r=r.__cdata,delete r.__cnt,!t.enableToStringFunc||null==r.__text&&null==r.__cdata||(r.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),r}return e.nodeType==k.TEXT_NODE||e.nodeType==k.CDATA_SECTION_NODE?e.nodeValue:void 0}function f(e,n,r,a){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+n;if(null!=r)for(var l=0;l<r.length;l++){var s=r[l],c=e[s];t.escapeMode&&(c=o(c)),i+=" "+s.substr(t.attributePrefix.length)+"=",i+=t.useDoubleQuotes?'"'+c+'"':"'"+c+"'"}return i+=a?"/>":">"}function m(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function v(e,t){return-1!==e.indexOf(t,e.length-t.length)}function h(e,n){return"property"==t.arrayAccessForm&&v(n.toString(),"_asArray")||0==n.toString().indexOf(t.attributePrefix)||0==n.toString().indexOf("__")||e[n]instanceof Function?!0:!1}function g(e){var t=0;if(e instanceof Object)for(var n in e)h(e,n)||t++;return t}function y(e,n,r){return 0==t.jsonPropertiesFilter.length||""==r||l(t.jsonPropertiesFilter,e,n,r)}function b(e){var n=[];if(e instanceof Object)for(var r in e)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(t.attributePrefix)&&n.push(r);return n}function E(e){var n="";return null!=e.__cdata&&(n+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(n+=t.escapeMode?o(e.__text):e.__text),n}function C(e){var n="";return e instanceof Object?n+=E(e):null!=e&&(n+=t.escapeMode?o(e):e),n}function T(e,t){return""===e?t:e+"."+t}function _(e,t,n,r){var a="";if(0==e.length)a+=f(e,t,n,!0);else for(var i=0;i<e.length;i++)a+=f(e[i],t,b(e[i]),!1),a+=w(e[i],T(r,t)),a+=m(e[i],t);return a}function w(e,t){var n="",r=g(e);if(r>0)for(var a in e)if(!h(e,a)&&(""==t||y(e,a,T(t,a)))){var i=e[a],o=b(i);if(null==i||void 0==i)n+=f(i,a,o,!0);else if(i instanceof Object)if(i instanceof Array)n+=_(i,a,o,t);else if(i instanceof Date)n+=f(i,a,o,!1),n+=i.toISOString(),n+=m(i,a);else{var l=g(i);l>0||null!=i.__text||null!=i.__cdata?(n+=f(i,a,o,!1),n+=w(i,T(t,a)),n+=m(i,a)):n+=f(i,a,o,!0)}else n+=f(i,a,o,!1),n+=C(i),n+=m(i,a)}return n+=C(e)}var I="1.2.0";t=t||{},n(),r();var k={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(t){var n=e.ActiveXObject||"ActiveXObject"in e;if(void 0===t)return null;var r;if(e.DOMParser){var a=new e.DOMParser,i=null;if(!n)try{i=a.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(o){i=null}try{r=a.parseFromString(t,"text/xml"),null!=i&&r.getElementsByTagNameNS(i,"parsererror").length>0&&(r=null)}catch(o){r=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(t);return r},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?c(e):e},this.xml2json=function(e){return p(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return w(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return I}}});var P=function(){var e=function(e,n,r,a){var i=this;if(this.log=console.log,this.Player=e,this.isVideoStarted=!1,this.wrapper=a,this.isInroll=r,this.videoPlayer_={adContainer:n,contentPlayer:t.createElement("video"),width:n.offsetWidth,height:n.offsetHeight},"undefined"==typeof google){var o=n.ownerDocument,l=o.defaultView||o.parentWindow;google=l.google}this.contentCompleteCalled_=!1;var s=google.ima.ImaSdkSettings.VpaidMode.INSECURE;google.ima.settings.setVpaidMode(s),this.adDisplayContainer_=new google.ima.AdDisplayContainer(this.videoPlayer_.adContainer),this.adsLoader_=new google.ima.AdsLoader(this.adDisplayContainer_),this.adsManager_=null,this.adsLoader_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded_,!1,this),this.adsLoader_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this),this.Player.on(ae,function(){i.isVideoStarted=!0})};return e.prototype.initialUserAction=function(){this.adDisplayContainer_.initialize(),this.videoPlayer_.contentPlayer.load()},e.prototype.requestXml=function(e){var t=new google.ima.AdsRequest;t.adTagUrl="",t.adsResponse=e,t.linearAdSlotWidth=this.videoPlayer_.width,t.linearAdSlotHeight=this.videoPlayer_.height,t.nonLinearAdSlotWidth=this.videoPlayer_.width,t.nonLinearAdSlotHeight=this.videoPlayer_.height,this.adsLoader_.requestAds(t)},e.prototype.pause=function(){this.adsManager_&&this.adsManager_.pause()},e.prototype.resume=function(){this.adsManager_&&this.adsManager_.resume()},e.prototype.resize=function(e,t){this.adsManager_&&this.adsManager_.resize(e,t,google.ima.ViewMode.FULLSCREEN)},e.prototype.contentEnded=function(){this.contentCompleteCalled_=!0,this.adsLoader_.contentComplete()},e.prototype.onAdsManagerLoaded_=function(e){this.log("[vbm] ad loaded");var t=this,n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager_=e.getAdsManager(this.videoPlayer_.contentPlayer,n),this.adsManager_.setVolume(0);var r=this.videoPlayer_.adContainer.getElementsByTagName("video")[0];this.isInroll&&this.adsManager_.resize(this.wrapper.offsetWidth,A.getHeightByRatio(this.wrapper.offsetWidth,"16:9"),google.ima.ViewMode.FULLSCREEN),this.Player.on(ie,function(){t.isVideoStarted||(r.playsinline=!0,r.muted=!0,r.volume=0,r.pause(),r.play())}),this.processAdsManager_(this.adsManager_)},e.prototype.processAdsManager_=function(e){e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_,!1,this),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_,!1,this),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this);var t=[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.LOG];for(var n in t)e.addEventListener(t[n],this.onAdEvent_,!1,this);var r,a;this.Player.fullscreen?(r=this.Player.fullscreenWidth,a=this.Player.fullscreenHeight):(r=this.videoPlayer_.width,a=this.videoPlayer_.height);try{e.init(r,a,google.ima.ViewMode.NORMAL),e.start()}catch(i){this.Player.emit(ue,new Error("problem with the VAST response"))}},e.prototype.onContentPauseRequested_=function(){this.log("[vbm] pause for ad")},e.prototype.onContentResumeRequested_=function(){this.contentCompleteCalled_||(this.log("[vbm] resume after ad"),this.Player.emit(ie),this.Player.emit(se))},e.prototype.getDuration=function(){return this.duration||this.ad&&this.ad.getDuration()||0},e.prototype.getCurrentTime=function(){var e=this.adsManager_.getRemainingTime(),t=this.duration&&e>0?this.duration-e:0;return t>0?t:0},e.prototype.volume=function(e){return arguments.length?(e&&(e/=100),void this.adsManager_.setVolume(e)):this.adsManager_.getVolume()},e.prototype.onAdEvent_=function(e){this.log("[vbm] ad event: "+e.type),this.ad=e.getAd();var t=this.Player;switch(e.type){case google.ima.AdEvent.Type.LOADED:this.duration=this.adsManager_.getRemainingTime(),this.Player.emit(re);break;case google.ima.AdEvent.Type.PAUSED:this.Player.emit(ie);break;case google.ima.AdEvent.Type.STARTED:case google.ima.AdEvent.Type.RESUMED:this.Player.emit(ae),this.isInroll&&this.adsManager_.resize(this.wrapper.offsetWidth,A.getHeightByRatio(this.wrapper.offsetWidth,"16:9"),google.ima.ViewMode.FULLSCREEN);break;case google.ima.AdEvent.Type.COMPLETE:setTimeout(function(){t.emit(se)},3e3);break;case google.ima.AdEvent.Type.CLICK:t.emit(ce),this.log("[vbm] adClicked");break;case google.ima.AdEvent.Type.LOG:var n=e.getAdData();n.adError&&this.Player.emit(ue,new Error("Non-fatal error occurred: "+n.adError.getMessage()))}},e.prototype.onAdError_=function(e){var t=e.getError().toString();this.log("[vbm] ad error: "+t),this.Player.emit(ue,new Error(t)),this.adsManager_&&this.adsManager_.destroy(),this.log("[vbm] resume after ad")},e}();A.inherits(c,r),A.inherits(u,r),A.inherits(d,r),A.inherits(p,r),A.inherits(f,r),A.inherits(m,r),A.inherits(v,r),A.inherits(h,r),A.inherits(g,r),A.inherits(y,r),A.inherits(b,r),A.inherits(E,r);var V=1,M=2,L=3,D=4,O=5,R=6,B=7,j="facebook",H="kinopoisk",U="viboom",F="rutube",W="youtube",z="vimeo",q="beon",G="post",J="vast",K="embed",Y="vkvideo",X="twitch",Q="twitch_live",$="facebook-post",Z="brandlift",ee="okgroup",te=1,ne=2,re="onPlayerReady",ae="onPlayerStart",ie="onPlayerStop",oe="onPlayerBuffer",le="onPlayerRewind",se="onPlayerFinish",ce="onPlayerClick",ue="onPlayerError",de="onPlayerHide",pe="onPlayerChoice",fe=[],me=function(){function e(){for(var e=A.getElementByClassName("div","viboom-overroll")||[],t=0;t<e.length;t++){var r=e[t];r.overrollOverlay||(r.overrollOverlay=!0,n(r))}return p()}function n(e){function n(){for(var t=parseInt(e.offsetWidth),n=parseInt(e.offsetHeight),a={top:0,left:null,width:null,height:null},i=0;i<e.children.length;i++){var o=e.children[i];"overroll_code"===o.id&&(o.style.display="block");var l="none"===A.getStyleValue(o,"display"),s=["SCRIPT","STYLE"],c=o!=r&&!l&&-1===s.indexOf(o.tagName);if(c){var u=parseInt(o.offsetLeft);u=0>u?0:u;var d=parseInt(o.offsetWidth);d=d+u>t?t-u:d;var p=parseInt(o.offsetTop)||0,f=parseInt(o.offsetHeight)||0,m=p+f;(null===a.left||u<a.left)&&(a.left=u),(null===a.width||d>a.width)&&(a.width=d),(null===a.height||m>a.height)&&(a.height=m)}}a.width=a.width||t,a.height=a.height||n;for(var i in a)r.style[i]=a[i]+"px"}var r=t.createElement("div");return r.className=v,m.push(r),e.appendChild(r),r.sizeTimer=A.setIntervalNow(n,300),n(),r.muteTimer=setInterval(function(){A.addClass(r,"rtp-no-events")},5e3),r}function r(){u(function(e){a(e),A.removeClass(e,"rtp-no-events")})}function a(e){e.muteTimer&&(clearInterval(e.muteTimer),e.muteTimer=null)}function i(e){e.sizeTimer&&(clearInterval(e.sizeTimer),e.sizeTimer=null)}function o(e){var t=m.indexOf(e);e.parentNode.overrollOverlay=!1,m.splice(t,1),e.parentNode.removeChild(e),i(e),a(e)}function l(e){e=e?[].concat(e):[],u(function(t){-1===e.indexOf(t)&&o(t)})}function s(e){e=e?[].concat(e):[],u(function(t){-1===e.indexOf(t)&&(t.style.display="none")})}function c(e){function t(n){var r=n.target;A.removeListener(r,"click, touchstart",t),e(r)}u(function(e){A.addListener(e,"click, touchstart",t),A.addClass(e,v+"--active")})}function u(e){for(var t=[],n=0;n<m.length;n++)(function(n){t.push(function(){return e(n)})})(m[n]);for(var n=0;n<t.length;n++)t[n]()}function d(e){return m[0]}function p(e){return m.length}function f(e){return A.getElementByClassName("div",v,e)[0]}var m=[],v="rtp-overlay";return{appendAll:e,detachAll:l,hideAll:s,stopMuteAll:r,onClick:c,first:d,each:u,size:p,findOverlay:f}}(),ve={},he=!1,ge=0,ye=null,be=!1,Ee=null,Ce=function(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},del:function(t){delete e[t]},len:function(){var t=0;for(var n in e)++t;return t}}}(),Te=new x(null,"vbm-storage",function(){var e=localStorage.getItem(this.name);return e?JSON.parse(e):null},function(e,t){localStorage.setItem(this.name,JSON.stringify(this.data))});e.VbmVideo=I,e.VbmVideo.Util=A,C(),S||A.initYM(),A.loadCSS(k+"/video.css")}var _e=null;if(_e){var we=new e.VbmVideo;we.getContent(_e)}}(window,document);